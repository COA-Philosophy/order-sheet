<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ¡ã‚¤ãƒ‰ã‚¹ãƒ¼ãƒ„ã€€ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ãƒ¼ãƒˆ</title>
    
    <style>
/* =====================================
   CRMã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ãƒ¼ãƒˆ æ”¹å–„ç‰ˆCSS
   ===================================== */

/* ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Hiragino Sans', 'Yu Gothic', 'Meiryo', sans-serif;
    margin: 20px;
    background-color: #f5f5f5;
    line-height: 1.6;
    color: #333;
}

/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
.container {
    max-width: 210mm;
    margin: 0 auto;
    background: white;
    padding: 20px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    border-radius: 8px;
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ */
.header {
    text-align: center;
    margin-bottom: 30px;
    border-bottom: 3px solid #2c3e50;
    padding-bottom: 15px;
}

.header h1 {
    color: #2c3e50;
    font-size: 28px;
    margin: 0;
    letter-spacing: 2px;
}

.header p {
    color: #7f8c8d;
    margin: 5px 0 0 0;
    font-size: 14px;
}

/* ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…±é€š */
.section {
    margin-bottom: 25px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    overflow: hidden;
}

.section-title {
    background: linear-gradient(135deg, #34495e, #2c3e50);
    color: white;
    padding: 12px 15px;
    margin: 0;
    font-size: 16px;
    font-weight: bold;
}

.section-content {
    padding: 20px;
}

/* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´  */
.form-row {
    display: flex;
    margin-bottom: 15px;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.form-group {
    flex: 1;
    min-width: 200px;
    margin-bottom: 15px;
}

.form-group:last-child {
    margin-right: 0;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #2c3e50;
    font-size: 14px;
}

.required {
    color: #e74c3c;
}

.form-group input, .form-group select, .form-group textarea {
    width: 100%;
    padding: 10px;
    border: 2px solid #e0e0e0;
    border-radius: 4px;
    font-size: 14px;
    transition: all 0.3s ease;
    box-sizing: border-box;
}

.form-group input:focus, .form-group select:focus, .form-group textarea:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
}

/* å¿…é ˆæƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
.essential-info {
    border: 3px solid #e74c3c;
    background: linear-gradient(135deg, #fff5f5, #ffffff);
    box-shadow: 0 8px 25px rgba(231, 76, 60, 0.15);
}

.essential-info .section-title {
    background: linear-gradient(135deg, #e74c3c, #c0392b);
    font-size: 18px;
    padding: 15px 20px;
}

.input-guide {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 25px;
    color: #495057;
}

.input-guide p {
    margin: 0;
    font-size: 14px;
}

/* å¿…é ˆé …ç›®ã‚°ãƒ«ãƒ¼ãƒ— */
.essential-group {
    background: white;
    border: 2px solid #e9ecef;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    transition: all 0.3s ease;
}

.essential-group:hover {
    border-color: #3498db;
    box-shadow: 0 4px 15px rgba(52, 152, 219, 0.1);
}

.essential-group.completed {
    border-color: #27ae60;
    background: linear-gradient(135deg, #f8fff8, #ffffff);
}

.essential-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #e9ecef;
}

.step-number {
    background: #3498db;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin-right: 15px;
    font-size: 14px;
}

.essential-header h4 {
    flex: 1;
    margin: 0;
    color: #2c3e50;
    font-size: 16px;
}

.check-mark {
    background: #27ae60;
    color: white;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    opacity: 0;
    transition: all 0.3s ease;
}

.check-mark.visible {
    opacity: 1;
    transform: scale(1.1);
}

/* å¤§ããªå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ */
.large-input input, .large-input select {
    font-size: 16px;
    padding: 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.large-input input:focus, .large-input select:focus {
    border-color: #3498db;
    box-shadow: 0 0 10px rgba(52, 152, 219, 0.2);
    transform: translateY(-2px);
}

.large-input input.valid {
    border-color: #27ae60;
    background: linear-gradient(135deg, #f8fff8, #ffffff);
}

.large-input input.invalid {
    border-color: #e74c3c;
    background: linear-gradient(135deg, #fff5f5, #ffffff);
}

/* åå‰å…¥åŠ›ã‚¨ãƒªã‚¢ï¼ˆçµ±åˆç‰ˆï¼‰ */
.name-input {
    margin-bottom: 15px;
}

/* ç”Ÿå¹´æœˆæ—¥å…¥åŠ›ã‚¨ãƒªã‚¢ */
.birth-date-inputs {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    gap: 15px;
}

/* ä½æ‰€å…¥åŠ›ã‚¨ãƒªã‚¢ */
.address-inputs .postal-row {
    display: flex;
    gap: 10px;
    align-items: end;
    margin-bottom: 15px;
}

.address-lookup-btn {
    background: #3498db;
    color: white;
    border: none;
    padding: 15px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    white-space: nowrap;
    transition: all 0.3s ease;
}

.address-lookup-btn:hover {
    background: #2980b9;
    transform: translateY(-2px);
}

/* å…¥åŠ›ãƒ’ãƒ³ãƒˆ */
.input-hint {
    font-size: 12px;
    color: #7f8c8d;
    margin-top: 5px;
    font-style: italic;
}

.postal-hint {
    color: #27ae60;
    font-size: 12px;
    margin-left: 10px;
}

/* é€²æ—ãƒãƒ¼ */
.progress-section {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    margin-top: 20px;
    text-align: center;
}

.progress-bar {
    background: #e9ecef;
    height: 8px;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 10px;
}

.progress-fill {
    background: linear-gradient(135deg, #27ae60, #2ecc71);
    height: 100%;
    width: 0%;
    transition: width 0.5s ease;
    border-radius: 4px;
}

.progress-text {
    font-weight: bold;
    color: #2c3e50;
    font-size: 14px;
}

/* å®Œäº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
.essential-group.completed .step-number {
    background: #27ae60;
}

/* æ¡å¯¸ã‚°ãƒªãƒƒãƒ‰ */
.measurement-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 10px;
}

/* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚°ãƒ«ãƒ¼ãƒ— */
.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 10px;
}

.checkbox-item {
    display: flex;
    align-items: center;
    min-width: 150px;
}

.checkbox-item input[type="checkbox"] {
    width: auto;
    margin-right: 8px;
}

/* ã‚¹ã‚¿ã‚¤ãƒ«ã‚¢ã‚¤ãƒ†ãƒ  */
.style-item {
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    background: #fafafa;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.style-item:hover {
    border-color: #3498db;
    background: #f8f9fa;
}

.style-item.removing {
    animation: fadeOut 0.3s ease-out forwards;
}

@keyframes fadeOut {
    from {
        opacity: 1;
        max-height: 1000px;
        margin-bottom: 20px;
    }
    to {
        opacity: 0;
        max-height: 0;
        margin-bottom: 0;
        padding: 0;
    }
}

.style-item.adding {
    animation: fadeIn 0.3s ease-out forwards;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        max-height: 0;
        margin-bottom: 0;
        padding: 0;
    }
    to {
        opacity: 1;
        max-height: 1000px;
        margin-bottom: 20px;
        padding: 20px;
    }
}

.item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #e0e0e0;
}

.item-header h5 {
    color: #2c3e50;
    margin: 0;
    font-size: 16px;
    font-weight: bold;
}

.item-count {
    background: #3498db;
    color: white;
    padding: 15px;
    text-align: center;
    font-size: 16px;
    font-weight: bold;
    border-radius: 6px;
    margin-bottom: 20px;
}

/* ç·è¨ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
.total-section {
    background: #f8f9fa;
    border: 2px solid #3498db;
    border-radius: 8px;
    padding: 20px;
    margin-top: 20px;
}

.total-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-size: 16px;
}

.total-row.grand-total {
    font-size: 20px;
    font-weight: bold;
    color: #2c3e50;
    border-top: 2px solid #3498db;
    padding-top: 10px;
    margin-top: 15px;
}

/* å‚™è€ƒã‚¨ãƒªã‚¢ï¼ˆæ‹¡å¤§ç‰ˆï¼‰ */
.notes-area {
    height: 150px;
}

/* ãƒœã‚¿ãƒ³ */
.download-btn {
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 25px;
    font-size: 16px;
    cursor: pointer;
    display: block;
    margin: 10px auto;
    transition: all 0.3s ease;
    min-width: 200px;
}

.download-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
}

.save-btn {
    background: linear-gradient(135deg, #27ae60, #2ecc71);
}

.save-btn:hover {
    box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
}

.add-item-btn {
    background: linear-gradient(135deg, #27ae60, #2ecc71);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s;
}

.add-item-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(46, 204, 113, 0.4);
}

.remove-item-btn {
    background: linear-gradient(135deg, #e74c3c, #c0392b);
    color: white;
    border: none;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.3s;
}

.remove-item-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 3px 8px rgba(231, 76, 60, 0.4);
}

/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
.status-message {
    padding: 15px;
    border-radius: 6px;
    margin: 20px 0;
    text-align: center;
    font-weight: bold;
}

.status-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.status-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.status-info {
    background: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}

/* ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ã‚¹ã‚¿ã‚¤ãƒ« */
optgroup {
    font-weight: bold;
    font-style: normal;
    color: #2c3e50;
    background-color: #f8f9fa;
}

optgroup option {
    font-weight: normal;
    color: #333;
    background-color: white;
    padding-left: 20px;
}

/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes checkmark {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

.check-mark.visible {
    animation: checkmark 0.5s ease;
}

/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ */
.form-group.focused {
    background: #f0f8ff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(52, 152, 219, 0.2);
    transition: all 0.3s ease;
}

/* ãƒ¢ãƒã‚¤ãƒ«ç”¨æ¬¡ã¸ãƒœã‚¿ãƒ³ */
.mobile-next-btn {
    display: none;
    width: 100%;
    margin-top: 15px;
    padding: 12px 20px;
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
    border: none;
    border-radius: 25px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
}

@media (max-width: 768px) {
    .mobile-next-btn {
        display: block;
    }
}

.mobile-next-btn:active {
    transform: scale(0.98);
    box-shadow: 0 2px 10px rgba(52, 152, 219, 0.4);
}

/* ãƒ¢ãƒã‚¤ãƒ«ã§ã®inputè¦ç´ ã®æ”¹å–„ */
@media (max-width: 768px) {
    .form-group input,
    .form-group select,
    .form-group textarea {
        font-size: 16px; /* iOS Safari ã®ã‚ºãƒ¼ãƒ é˜²æ­¢ */
        padding: 12px;
    }
    
    .large-input input,
    .large-input select {
        font-size: 18px;
        padding: 15px;
    }
    
    /* ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’å¤§ãã */
    .checkbox-item {
        padding: 10px 0;
    }
    
    .checkbox-item input[type="checkbox"] {
        width: 20px;
        height: 20px;
        margin-right: 12px;
    }
}

/* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
@media (max-width: 768px) {
    body {
        margin: 10px;
    }
    
    .container {
        padding: 15px;
    }
    
    .header h1 {
        font-size: 22px;
    }
    
    .form-row {
        flex-direction: column;
        gap: 0;
    }
    
    .form-group {
        margin-right: 0;
        margin-bottom: 15px;
        min-width: auto;
    }
    
    .measurement-grid {
        grid-template-columns: 1fr;
    }
    
    .checkbox-group {
        flex-direction: column;
        gap: 10px;
    }
    
    .checkbox-item {
        min-width: auto;
    }
    
    .birth-date-inputs {
        grid-template-columns: 1fr;
    }
    
    .address-inputs .postal-row {
        flex-direction: column;
        gap: 15px;
    }
    
    .essential-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .step-number {
        align-self: flex-start;
    }
    
    .download-btn {
        min-width: auto;
        width: 100%;
    }
}

/* å°åˆ·å¯¾å¿œ - ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œæ”¹è‰¯ç‰ˆ */
@media print {
    /* A4ã‚µã‚¤ã‚ºè¨­å®š */
    @page {
        size: A4;
        margin: 10mm;
    }
    
    body { 
        margin: 0; 
        background: white;
        font-size: 8pt !important;
        line-height: 1.3 !important;
    }
    
    .container { 
        box-shadow: none; 
        margin: 0; 
        max-width: none;
        padding: 0;
        width: 100%;
        border-radius: 0;
    }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
    .header {
        margin-bottom: 5px !important;
        padding-bottom: 3px !important;
        border-bottom: 1px solid #2c3e50;
        page-break-after: avoid !important;
    }
    
    .header h1 {
        font-size: 14pt !important;
        margin: 0 !important;
        color: #2c3e50 !important;
    }
    
    .header p {
        font-size: 8pt !important;
        margin: 1px 0 !important;
    }
    
    /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…±é€š */
    .section {
        margin-bottom: 5px !important;
        page-break-inside: avoid !important;
        border: 0.5px solid #999 !important;
        border-radius: 0 !important;
    }
    
    .section-title {
        font-size: 9pt !important;
        padding: 3px 8px !important;
        background: #f0f0f0 !important;
        color: #333 !important;
        margin: 0 !important;
        border-bottom: 0.5px solid #999 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }
    
    .section-content {
        padding: 5px !important;
    }
    
    /* å¿…é ˆæƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ - 1ãƒšãƒ¼ã‚¸ç›®ä¸Šéƒ¨ã«é…ç½® */
    .essential-info {
        border: 1px solid #333 !important;
        margin-bottom: 5px !important;
    }
    
    .essential-info .section-title {
        background: #333 !important;
        color: white !important;
        font-size: 10pt !important;
    }
    
    .essential-group {
        display: inline-block !important;
        width: 48% !important;
        vertical-align: top !important;
        border: 0.5px solid #ccc !important;
        padding: 4px !important;
        margin: 0 1% 4px 0 !important;
        background: white !important;
        box-sizing: border-box !important;
    }
    
    .essential-group:nth-child(even) {
        margin-right: 0 !important;
    }
    
    .essential-header {
        display: none !important;
    }
    
    /* åå‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
    .name-input {
        margin-bottom: 3px !important;
    }
    
    /* ç”Ÿå¹´æœˆæ—¥ã‚’1è¡Œã« */
    .birth-date-inputs {
        display: flex !important;
        gap: 2px !important;
    }
    
    .birth-date-inputs .form-group {
        flex: 1 !important;
    }
    
    /* ä½æ‰€ã‚’è¶…ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
    .address-inputs .form-group {
        margin-bottom: 2px !important;
    }
    
    .postal-row {
        margin-bottom: 2px !important;
    }
    
    /* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã‚’è¶…ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
    .form-row {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 5px !important;
        margin-bottom: 3px !important;
    }
    
    .form-group {
        margin-bottom: 3px !important;
        flex: 1 !important;
        min-width: 60px !important;
    }
    
    .form-group label {
        font-size: 7pt !important;
        margin-bottom: 1px !important;
        font-weight: normal !important;
        color: #333 !important;
        line-height: 1 !important;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
        border: none !important;
        border-bottom: 0.5px solid #999 !important;
        padding: 1px !important;
        font-size: 8pt !important;
        background: none !important;
        font-weight: normal !important;
        color: #000 !important;
        height: 12px !important;
        line-height: 1 !important;
    }
    
    /* å…¥åŠ›æ¸ˆã¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ */
    input:not(:placeholder-shown),
    select:not([value=""]):not([value=""]),
    textarea:not(:placeholder-shown) {
        font-weight: bold !important;
        border-bottom: 0.5px solid #000 !important;
    }
    
    /* æ¡å¯¸ã‚°ãƒªãƒƒãƒ‰ã‚’è¶…é«˜å¯†åº¦ã« */
    .measurement-grid {
        display: grid !important;
        grid-template-columns: repeat(6, 1fr) !important;
        gap: 3px !important;
        font-size: 7pt !important;
    }
    
    .measurement-grid .form-group {
        min-width: 40px !important;
    }
    
    /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ã‚’éè¡¨ç¤º */
    h4 {
        display: none !important;
    }
    
    /* =================================
       ã‚¹ã‚¿ã‚¤ãƒ«ã‚¢ã‚¤ãƒ†ãƒ ã®æ¨ªä¸¦ã³æ”¹å–„
       ================================= */
    .style-item {
        border: 0.5px solid #666 !important;
        padding: 3px !important;
        margin-bottom: 4px !important;
        background: white !important;
        page-break-inside: avoid !important;
    }
    
    /* ã‚¢ã‚¤ãƒ†ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ã‚ˆã‚Šã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
    .style-item .item-header {
        margin-bottom: 2px !important;
        padding-bottom: 1px !important;
        border-bottom: 0.5px solid #ccc !important;
    }
    
    .style-item .item-header h5 {
        font-size: 8pt !important;
        margin: 0 !important;
        font-weight: bold !important;
    }
    
    /* ãƒ•ã‚©ãƒ¼ãƒ è¡Œã‚’4åˆ—ã‚°ãƒªãƒƒãƒ‰ã«å¤‰æ›´ */
    .style-item .form-row {
        display: grid !important;
        grid-template-columns: repeat(4, 1fr) !important;
        gap: 3px !important;
        margin-bottom: 2px !important;
    }
    
    /* ãƒ•ã‚©ãƒ¼ãƒ ã‚°ãƒ«ãƒ¼ãƒ—ã®æœ€é©åŒ– */
    .style-item .form-group {
        margin-bottom: 0 !important;
        min-width: auto !important;
    }
    
    /* ãƒ©ãƒ™ãƒ«ã‚’è¶…çŸ­ç¸®è¡¨ç¤º */
    .style-item .form-group label {
        font-size: 5pt !important;
        margin-bottom: 0 !important;
        line-height: 1 !important;
        font-weight: bold !important;
        color: #000 !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        white-space: nowrap !important;
    }
    
    /* ç‰¹å®šã®ãƒ©ãƒ™ãƒ«ã‚’çŸ­ç¸® */
    .style-item label[for*="itemType_"] { display: none !important; }
    .style-item label[for*="itemType_"]::after { 
        content: "ã‚¿ã‚¤ãƒ—" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="fabric_"] { display: none !important; }
    .style-item label[for*="fabric_"]::after { 
        content: "ç”Ÿåœ°" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="color_"] { display: none !important; }
    .style-item label[for*="color_"]::after { 
        content: "è‰²" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="jacketStyle_"] { display: none !important; }
    .style-item label[for*="jacketStyle_"]::after { 
        content: "Jã‚¹ã‚¿ã‚¤ãƒ«" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="lining_"] { display: none !important; }
    .style-item label[for*="lining_"]::after { 
        content: "è£åœ°" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="buttons_"] { display: none !important; }
    .style-item label[for*="buttons_"]::after { 
        content: "ãƒœã‚¿ãƒ³" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="chestPocket_"] { display: none !important; }
    .style-item label[for*="chestPocket_"]::after { 
        content: "èƒ¸P" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="waistPocket_"] { display: none !important; }
    .style-item label[for*="waistPocket_"]::after { 
        content: "è…°P" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="lapelStyle_"] { display: none !important; }
    .style-item label[for*="lapelStyle_"]::after { 
        content: "è¡¿å‹" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="price_"] { display: none !important; }
    .style-item label[for*="price_"]::after { 
        content: "ä¾¡æ ¼" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="deliveryDate_"] { display: none !important; }
    .style-item label[for*="deliveryDate_"]::after { 
        content: "ç´æœŸ" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    .style-item label[for*="notes_"] { display: none !important; }
    .style-item label[for*="notes_"]::after { 
        content: "å‚™è€ƒ" !important; 
        display: block !important;
        font-size: 5pt !important;
    }
    
    /* å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚‚è¶…ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
    .style-item input,
    .style-item select,
    .style-item textarea {
        font-size: 6pt !important;
        height: 10px !important;
        padding: 0 1px !important;
        line-height: 1 !important;
        border-bottom: 0.5px solid #999 !important;
    }
    
    /* ä¾¡æ ¼ã¨ç´æœŸã‚’åŒã˜è¡Œã« */
    .style-item .form-row:last-of-type {
        grid-template-columns: 1fr 1fr !important;
    }
    
    /* å‚™è€ƒæ¬„ã‚’æ¨ªå¹…ã„ã£ã±ã„ã« */
    .style-item .form-group:has(textarea) {
        grid-column: 1 / -1 !important;
    }
    
    .style-item textarea {
        height: 15px !important;
        font-size: 6pt !important;
    }
    
    /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’æœ€å°åŒ– */
    .checkbox-group {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 2px !important;
        font-size: 6pt !important;
        margin-top: 2px !important;
    }
    
    .checkbox-item {
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    .checkbox-item input[type="checkbox"] {
        width: 6px !important;
        height: 6px !important;
        margin-right: 1px !important;
    }
    
    /* ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ©ãƒ™ãƒ«ã‚‚çŸ­ç¸® */
    .style-item .checkbox-group > div[style*="width: 100%"] {
        display: none !important;
    }
    
    /* ã‚¢ã‚¤ãƒ†ãƒ é–“ã®ä½™ç™½ã‚’æœ€å°åŒ– */
    .style-item + .style-item {
        margin-top: 3px !important;
    }
    
    /* ä¾¡æ ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¶…ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
    .total-section {
        border: 0.5px solid #000 !important;
        padding: 3px !important;
        margin-top: 4px !important;
        background: #f9f9f9 !important;
        page-break-inside: avoid !important;
    }
    
    .total-section h4 {
        display: none !important;
    }
    
    #priceBreakdown {
        font-size: 7pt !important;
        margin-bottom: 2px !important;
    }
    
    .total-row {
        font-size: 8pt !important;
        margin-bottom: 2px !important;
    }
    
    .total-row.grand-total {
        font-size: 10pt !important;
        font-weight: bold !important;
        border-top: 0.5px solid #000 !important;
        padding-top: 2px !important;
        margin-top: 3px !important;
    }
    
    /* ãƒ‡ã‚£ã‚¹ã‚«ã‚¦ãƒ³ãƒˆéƒ¨åˆ†ã‚’å°åˆ·ç”¨ã«æœ€é©åŒ– */
    .total-section > div[style*="background: #fff3cd"] {
        background: none !important;
        border: none !important;
        padding: 2px 0 !important;
        margin-top: 3px !important;
    }
    
    /* å‰²å¼•å…¥åŠ›æ¬„ã¯éè¡¨ç¤ºã«ã—ã¦ã€å‰²å¼•æƒ…å ±ã®ã¿è¡¨ç¤º */
    .total-section > div[style*="background: #fff3cd"] > div:first-child {
        display: none !important; /* å…¥åŠ›æ¬„ã®è¡Œã‚’éè¡¨ç¤º */
    }
    
    /* å‰²å¼•é¡è¡¨ç¤ºã¯ç¶­æŒ */
    .total-section > div[style*="background: #fff3cd"] > div:last-child {
        margin-top: 0 !important;
        text-align: left !important;
        font-size: 8pt !important;
        font-weight: normal !important;
    }
    
    /* å‰²å¼•é¡ã®è¡¨ç¤ºã‚’èª¿æ•´ */
    #discountDisplay {
        font-weight: bold !important;
        color: #000 !important;
    }
    
    /* æœ€çµ‚ä¾¡æ ¼ã¨å†…é‡‘ãƒ»æ®‹é‡‘ */
    #payment-section .form-row {
        gap: 3px !important;
    }
    
    #payment-section .form-group {
        min-width: 50px !important;
    }
    
    /* å‚™è€ƒæ¬„ã‚’æ‹¡å¤§ï¼ˆã‚µã‚¤ãƒ³æ¬„å‰Šé™¤åˆ†ï¼‰ */
    .notes-area {
        height: 60px !important;
        font-size: 8pt !important;
    }
    
    /* éè¡¨ç¤ºè¦ç´  */
    .download-btn,
    .print-preview-btn,
    .add-item-btn,
    .remove-item-btn,
    .status-message,
    .progress-section,
    .save-section,
    .mobile-next-btn,
    .address-lookup-btn,
    .input-hint,
    .input-guide,
    .step-number,
    .check-mark,
    .save-btn,
    .item-count,
    .postal-hint {
        display: none !important;
    }
    
    /* textareaã®é«˜ã•åˆ¶é™ */
    textarea {
        resize: none !important;
        overflow: hidden !important;
    }
    
    /* ãƒšãƒ¼ã‚¸åˆ†å‰²æˆ¦ç•¥ */
    /* 1-2ã‚¢ã‚¤ãƒ†ãƒ : ã™ã¹ã¦1ãƒšãƒ¼ã‚¸ã«åã‚ã‚‹ */
    /* 3å€‹ä»¥ä¸Š: åŸºæœ¬æƒ…å ±1ãƒšãƒ¼ã‚¸ + ã‚¢ã‚¤ãƒ†ãƒ æƒ…å ±ã‚’åˆ¥ãƒšãƒ¼ã‚¸ */
    
    /* ã‚¢ã‚¤ãƒ†ãƒ ãŒ3å€‹ä»¥ä¸Šã®å ´åˆã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ–°ã—ã„ãƒšãƒ¼ã‚¸ã« */
    .style-section-3plus {
        page-break-before: always !important;
    }
    
    /* å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–“ã®ä½™ç™½ã‚’æœ€å°åŒ– */
    * {
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* å¿…è¦ãªè¦ç´ ã®ã¿æœ€å°é™ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¿½åŠ  */
    .section-content,
    .form-group,
    .style-item,
    .essential-group {
        padding: 3px !important;
    }
    
    /* ç©ºç™½è¡Œã®å‰Šé™¤ */
    br {
        display: none !important;
    }
    
    /* ãƒ¢ãƒã‚¤ãƒ«å°åˆ·ã®æœ€é©åŒ– */
    @media (max-width: 768px) {
        body {
            font-size: 7pt !important;
        }
        
        .header h1 {
            font-size: 12pt !important;
        }
        
        .section-title {
            font-size: 8pt !important;
        }
        
        .form-group label {
            font-size: 6pt !important;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            font-size: 7pt !important;
        }
        
        .measurement-grid {
            grid-template-columns: repeat(4, 1fr) !important;
        }
        
        .checkbox-group {
            grid-template-columns: repeat(2, 1fr) !important;
            font-size: 5pt !important;
        }
    }
}

/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¼·åŒ– */
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    border-width: 3px;
}

/* ç„¡åŠ¹çŠ¶æ…‹ */
.form-group input:disabled,
.form-group select:disabled,
.form-group textarea:disabled {
    background-color: #f8f9fa;
    color: #6c757d;
    cursor: not-allowed;
}

/* ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ */
.form-group input::placeholder,
.form-group textarea::placeholder {
    color: #adb5bd;
    font-style: italic;
}

/* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆWebkitç³»ãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®å‘ä¸Š */
select {
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 20px;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
}

/* ä¿å­˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
.save-section {
    margin-top: 30px;
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
}

.save-section h3 {
    margin-bottom: 20px;
}

/* å°åˆ·ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰ */
.print-preview-mode {
    background: white !important;
}

.print-preview-mode .container {
    max-width: 210mm !important;
    box-shadow: 0 0 20px rgba(0,0,0,0.3) !important;
}

/* ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ï¼‰ */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 9999;
    align-items: center;
    justify-content: center;
}

.modal-overlay[style*="display: block"] {
    display: flex !important;
}

.modal-content {
    background: white;
    padding: 0;
    border-radius: 12px;
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow: auto;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.modal-header {
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
    padding: 20px;
    border-radius: 12px 12px 0 0;
    position: relative;
}

.modal-header h3 {
    margin: 0;
    font-size: 20px;
}

.modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    line-height: 1;
    opacity: 0.8;
    transition: opacity 0.3s;
}

.modal-close:hover {
    opacity: 1;
}

.modal-body {
    padding: 20px;
}

.filename-display {
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    font-family: monospace;
    font-size: 14px;
    color: #495057;
    cursor: pointer;
    user-select: all;
    transition: all 0.3s;
}

.filename-display:hover {
    border-color: #3498db;
    background: #e3f2fd;
}

.copy-button {
    width: 100%;
    background: linear-gradient(135deg, #27ae60, #2ecc71);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.copy-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(46, 204, 113, 0.4);
}

.copy-button.copied {
    background: linear-gradient(135deg, #27ae60, #219a52);
}

.modal-instructions {
    margin-top: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.modal-instructions h4 {
    margin: 0 0 10px 0;
    color: #2c3e50;
}

.modal-instructions ol {
    margin: 0;
    padding-left: 20px;
    color: #495057;
    line-height: 1.8;
}

.modal-footer {
    padding: 20px;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

.modal-button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s;
}

.modal-button.primary {
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
}

.modal-button.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
}

.modal-button.secondary {
    background: #e9ecef;
    color: #495057;
}

.modal-button.secondary:hover {
    background: #dee2e6;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ¡ã‚¤ãƒ‰ã‚¹ãƒ¼ãƒ„ ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ãƒ¼ãƒˆ</h1>
            <p>Order Date: <span id="currentDate"></span> | Order No: <span id="orderNumber"></span></p>
        </div>

        <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ -->
        <div id="statusMessage" style="display: none;"></div>

        <!-- å¿…é ˆæƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆé¡§å®¢å…¥åŠ›ç”¨ï¼‰ -->
        <div class="section essential-info">
            <h2 class="section-title">âœ¨ å¿…é ˆæƒ…å ±ã®å…¥åŠ›ï¼ˆãŠå®¢æ§˜ã”è¨˜å…¥ãã ã•ã„ï¼‰</h2>
            <div class="section-content">
                <div class="input-guide">
                    <p>ğŸ“ ä»¥ä¸‹ã®4é …ç›®ã®ã”å…¥åŠ›ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚å…¥åŠ›å®Œäº†ã§ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                </div>
                
                <!-- ãŠåå‰ï¼ˆçµ±åˆç‰ˆï¼‰ -->
                <div class="essential-group">
                    <div class="essential-header">
                        <span class="step-number">1</span>
                        <h4>ãŠåå‰</h4>
                        <span class="check-mark" id="nameCheck">âœ“</span>
                    </div>
                    <div class="name-input">
                        <div class="form-group large-input">
                            <label for="fullName">ãŠåå‰</label>
                            <input type="text" id="fullName" name="fullName" placeholder="å±±ç”° å¤ªéƒ" required autocomplete="name" enterkeyhint="next">
                        </div>
                        <div class="form-group">
                            <label for="fullNameKana">ãƒ•ãƒªã‚¬ãƒŠ</label>
                            <input type="text" id="fullNameKana" name="fullNameKana" placeholder="ãƒ¤ãƒãƒ€ ã‚¿ãƒ­ã‚¦" autocomplete="name" enterkeyhint="next">
                        </div>
                    </div>
                </div>

                <!-- é›»è©±ç•ªå· -->
                <div class="essential-group">
                    <div class="essential-header">
                        <span class="step-number">2</span>
                        <h4>é›»è©±ç•ªå·</h4>
                        <span class="check-mark" id="phoneCheck">âœ“</span>
                    </div>
                    <div class="form-group large-input">
                        <label for="phone">æºå¸¯é›»è©±ã¾ãŸã¯å›ºå®šé›»è©±</label>
                        <input type="tel" id="phone" name="phone" placeholder="090-1234-5678" required autocomplete="tel" enterkeyhint="next" inputmode="tel">
                        <div class="input-hint">ãƒã‚¤ãƒ•ãƒ³ï¼ˆ-ï¼‰ã‚ã‚Šã§ã‚‚ã€ãªã—ã§ã‚‚OKã§ã™</div>
                    </div>
                </div>

                <!-- ç”Ÿå¹´æœˆæ—¥ -->
                <div class="essential-group">
                    <div class="essential-header">
                        <span class="step-number">3</span>
                        <h4>ç”Ÿå¹´æœˆæ—¥</h4>
                        <span class="check-mark" id="birthCheck">âœ“</span>
                    </div>
                    <div class="birth-date-inputs">
                        <div class="form-group">
                            <label for="birthYear">å¹´</label>
                            <select id="birthYear" name="birthYear" required>
                                <option value="">----</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="birthMonth">æœˆ</label>
                            <select id="birthMonth" name="birthMonth" required>
                                <option value="">--</option>
                                <option value="1">1æœˆ</option>
                                <option value="2">2æœˆ</option>
                                <option value="3">3æœˆ</option>
                                <option value="4">4æœˆ</option>
                                <option value="5">5æœˆ</option>
                                <option value="6">6æœˆ</option>
                                <option value="7">7æœˆ</option>
                                <option value="8">8æœˆ</option>
                                <option value="9">9æœˆ</option>
                                <option value="10">10æœˆ</option>
                                <option value="11">11æœˆ</option>
                                <option value="12">12æœˆ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="birthDay">æ—¥</label>
                            <select id="birthDay" name="birthDay" required>
                                <option value="">--</option>
                            </select>
                        </div>
                        <input type="hidden" id="birthDate" name="birthDate">
                    </div>
                </div>

                <!-- ä½æ‰€ -->
                <div class="essential-group">
                    <div class="essential-header">
                        <span class="step-number">4</span>
                        <h4>ã”ä½æ‰€</h4>
                        <span class="check-mark" id="addressCheck">âœ“</span>
                    </div>
                    <div class="address-inputs">
                        <div class="postal-row">
                            <div class="form-group">
                                <label for="postalCode">éƒµä¾¿ç•ªå·<span class="postal-hint">âœ… ãƒã‚¤ãƒ•ãƒ³ãªã—ã§OK</span></label>
                                <input type="text" id="postalCode" name="postalCode" placeholder="1234567" autocomplete="postal-code" enterkeyhint="next" inputmode="numeric">
                            </div>
                            <button type="button" class="address-lookup-btn" onclick="lookupAddress()">ä½æ‰€æ¤œç´¢</button>
                        </div>
                        <div class="form-group">
                            <label for="prefecture">éƒ½é“åºœçœŒ</label>
                            <select id="prefecture" name="prefecture" autocomplete="address-level1">
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="åŒ—æµ·é“">åŒ—æµ·é“</option>
                                <option value="é’æ£®çœŒ">é’æ£®çœŒ</option>
                                <option value="å²©æ‰‹çœŒ">å²©æ‰‹çœŒ</option>
                                <option value="å®®åŸçœŒ">å®®åŸçœŒ</option>
                                <option value="ç§‹ç”°çœŒ">ç§‹ç”°çœŒ</option>
                                <option value="å±±å½¢çœŒ">å±±å½¢çœŒ</option>
                                <option value="ç¦å³¶çœŒ">ç¦å³¶çœŒ</option>
                                <option value="èŒ¨åŸçœŒ">èŒ¨åŸçœŒ</option>
                                <option value="æ ƒæœ¨çœŒ">æ ƒæœ¨çœŒ</option>
                                <option value="ç¾¤é¦¬çœŒ">ç¾¤é¦¬çœŒ</option>
                                <option value="åŸ¼ç‰çœŒ">åŸ¼ç‰çœŒ</option>
                                <option value="åƒè‘‰çœŒ">åƒè‘‰çœŒ</option>
                                <option value="æ±äº¬éƒ½">æ±äº¬éƒ½</option>
                                <option value="ç¥å¥ˆå·çœŒ">ç¥å¥ˆå·çœŒ</option>
                                <option value="æ–°æ½ŸçœŒ">æ–°æ½ŸçœŒ</option>
                                <option value="å¯Œå±±çœŒ">å¯Œå±±çœŒ</option>
                                <option value="çŸ³å·çœŒ">çŸ³å·çœŒ</option>
                                <option value="ç¦äº•çœŒ">ç¦äº•çœŒ</option>
                                <option value="å±±æ¢¨çœŒ">å±±æ¢¨çœŒ</option>
                                <option value="é•·é‡çœŒ">é•·é‡çœŒ</option>
                                <option value="å²é˜œçœŒ">å²é˜œçœŒ</option>
                                <option value="é™å²¡çœŒ">é™å²¡çœŒ</option>
                                <option value="æ„›çŸ¥çœŒ">æ„›çŸ¥çœŒ</option>
                                <option value="ä¸‰é‡çœŒ">ä¸‰é‡çœŒ</option>
                                <option value="æ»‹è³€çœŒ">æ»‹è³€çœŒ</option>
                                <option value="äº¬éƒ½åºœ">äº¬éƒ½åºœ</option>
                                <option value="å¤§é˜ªåºœ">å¤§é˜ªåºœ</option>
                                <option value="å…µåº«çœŒ">å…µåº«çœŒ</option>
                                <option value="å¥ˆè‰¯çœŒ">å¥ˆè‰¯çœŒ</option>
                                <option value="å’Œæ­Œå±±çœŒ">å’Œæ­Œå±±çœŒ</option>
                                <option value="é³¥å–çœŒ">é³¥å–çœŒ</option>
                                <option value="å³¶æ ¹çœŒ">å³¶æ ¹çœŒ</option>
                                <option value="å²¡å±±çœŒ">å²¡å±±çœŒ</option>
                                <option value="åºƒå³¶çœŒ">åºƒå³¶çœŒ</option>
                                <option value="å±±å£çœŒ">å±±å£çœŒ</option>
                                <option value="å¾³å³¶çœŒ">å¾³å³¶çœŒ</option>
                                <option value="é¦™å·çœŒ">é¦™å·çœŒ</option>
                                <option value="æ„›åª›çœŒ">æ„›åª›çœŒ</option>
                                <option value="é«˜çŸ¥çœŒ">é«˜çŸ¥çœŒ</option>
                                <option value="ç¦å²¡çœŒ">ç¦å²¡çœŒ</option>
                                <option value="ä½è³€çœŒ">ä½è³€çœŒ</option>
                                <option value="é•·å´çœŒ">é•·å´çœŒ</option>
                                <option value="ç†Šæœ¬çœŒ">ç†Šæœ¬çœŒ</option>
                                <option value="å¤§åˆ†çœŒ">å¤§åˆ†çœŒ</option>
                                <option value="å®®å´çœŒ">å®®å´çœŒ</option>
                                <option value="é¹¿å…å³¶çœŒ">é¹¿å…å³¶çœŒ</option>
                                <option value="æ²–ç¸„çœŒ">æ²–ç¸„çœŒ</option>
                            </select>
                        </div>
                        <div class="form-group large-input">
                            <label for="address">å¸‚åŒºç”ºæ‘ãƒ»ç•ªåœ°ãƒ»å»ºç‰©å</label>
                            <input type="text" id="address" name="address" placeholder="æ¸‹è°·åŒºæµæ¯”å¯¿1-2-3 æµæ¯”å¯¿ãƒ“ãƒ«101å·" required autocomplete="address-line1" enterkeyhint="done">
                        </div>
                    </div>
                </div>

                <!-- å…¥åŠ›é€²æ— -->
                <div class="progress-section">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text">å…¥åŠ›å®Œäº†: <span id="progressText">0/4</span></div>
                </div>
            </div>
        </div>

        <!-- ä»»æ„æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h2 class="section-title">ğŸ“‹ è¿½åŠ æƒ…å ±ï¼ˆä»»æ„ï¼‰</h2>
            <div class="section-content">
                <div class="form-row">
                    <div class="form-group">
                        <label for="referrer">ã”ç´¹ä»‹è€…æ§˜</label>
                        <input type="text" id="referrer" name="referrer" placeholder="ã”ç´¹ä»‹ã„ãŸã ã„ãŸæ–¹ã®ãŠåå‰">
                    </div>
                    <div class="form-group">
                        <label for="gender">æ€§åˆ¥ï¼ˆä»»æ„ï¼‰</label>
                        <select id="gender" name="gender">
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="male">ç”·æ€§</option>
                            <option value="female">å¥³æ€§</option>
                            <option value="other">ãã®ä»–</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="occupation">è·æ¥­ï¼ˆä»»æ„ï¼‰</label>
                        <input type="text" id="occupation" name="occupation" placeholder="ä¾‹ï¼šä¼šç¤¾å“¡ã€çµŒå–¶è€…ã€è‡ªå–¶æ¥­">
                    </div>
                </div>
            </div>
        </div>

        <!-- æ¡å¯¸æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h2 class="section-title">ğŸ“ æ¡å¯¸æƒ…å ±</h2>
            <div class="section-content">
                <div class="form-row">
                    <div class="form-group">
                        <label for="height">èº«é•·ï¼ˆcmï¼‰</label>
                        <input type="number" id="height" name="height" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="weight">ä½“é‡ï¼ˆkgï¼‰</label>
                        <input type="number" id="weight" name="weight" step="0.1">
                    </div>
                </div>
                
                <!-- åŸºæœ¬æ¡å¯¸ -->
                <h4 style="color: #2c3e50; margin-bottom: 15px; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">åŸºæœ¬æ¡å¯¸</h4>
                <div class="measurement-grid">
                    <div class="form-group">
                        <label for="chest">èƒ¸å›²ï¼ˆcmï¼‰</label>
                        <input type="number" id="chest" name="chest" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="waist">ã‚¦ã‚¨ã‚¹ãƒˆï¼ˆcmï¼‰</label>
                        <input type="number" id="waist" name="waist" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="hip">ãƒ’ãƒƒãƒ—ï¼ˆcmï¼‰</label>
                        <input type="number" id="hip" name="hip" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="shoulderWidth">è‚©å¹…ï¼ˆcmï¼‰</label>
                        <input type="number" id="shoulderWidth" name="shoulderWidth" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="jacketLength">ä¸Šç€ä¸ˆï¼ˆcmï¼‰</label>
                        <input type="number" id="jacketLength" name="jacketLength" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="neckSize">é¦–å›ã‚Šï¼ˆcmï¼‰</label>
                        <input type="number" id="neckSize" name="neckSize" step="0.1">
                    </div>
                </div>

                <!-- è¢–æ¡å¯¸ -->
                <h4 style="color: #2c3e50; margin: 25px 0 15px 0; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">è¢–æ¡å¯¸</h4>
                <div class="measurement-grid">
                    <div class="form-group">
                        <label for="armLengthLeft">è¢–ä¸ˆå·¦ï¼ˆcmï¼‰</label>
                        <input type="number" id="armLengthLeft" name="armLengthLeft" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="armLengthRight">è¢–ä¸ˆå³ï¼ˆcmï¼‰</label>
                        <input type="number" id="armLengthRight" name="armLengthRight" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="yokoLength">è£„ä¸ˆï¼ˆcmï¼‰</label>
                        <input type="number" id="yokoLength" name="yokoLength" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="armHole">AHï¼ˆcmï¼‰</label>
                        <input type="number" id="armHole" name="armHole" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="upperArmCircum">äºŒã®è…•å‘¨ã‚Šï¼ˆcmï¼‰</label>
                        <input type="number" id="upperArmCircum" name="upperArmCircum" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="elbowCircum">è‚˜å‘¨ã‚Šï¼ˆcmï¼‰</label>
                        <input type="number" id="elbowCircum" name="elbowCircum" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="wristCircum">æ‰‹é¦–å‘¨ã‚Šï¼ˆcmï¼‰</label>
                        <input type="number" id="wristCircum" name="wristCircum" step="0.1">
                    </div>
                </div>

                <!-- ãƒ™ã‚¹ãƒˆæ¡å¯¸ -->
                <h4 style="color: #2c3e50; margin: 25px 0 15px 0; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">ãƒ™ã‚¹ãƒˆæ¡å¯¸</h4>
                <div class="measurement-grid">
                    <div class="form-group">
                        <label for="vestLength">ãƒ™ã‚¹ãƒˆä¸ˆï¼ˆcmï¼‰</label>
                        <input type="number" id="vestLength" name="vestLength" step="0.1">
                    </div>
                </div>

                <!-- ãƒ‘ãƒ³ãƒ„æ¡å¯¸ -->
                <h4 style="color: #2c3e50; margin: 25px 0 15px 0; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">ãƒ‘ãƒ³ãƒ„æ¡å¯¸</h4>
                <div class="measurement-grid">
                    <div class="form-group">
                        <label for="pantWaist">ãƒ‘ãƒ³ãƒ„ã‚¦ã‚¨ã‚¹ãƒˆï¼ˆcmï¼‰</label>
                        <input type="number" id="pantWaist" name="pantWaist" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="crotchDepth">è‚¡ä¸Šï¼ˆcmï¼‰</label>
                        <input type="number" id="crotchDepth" name="crotchDepth" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="inseam">è‚¡ä¸‹ï¼ˆcmï¼‰</label>
                        <input type="number" id="inseam" name="inseam" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="pantTotalLength">ãƒ‘ãƒ³ãƒ„ç·ä¸ˆï¼ˆcmï¼‰</label>
                        <input type="number" id="pantTotalLength" name="pantTotalLength" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="inseamActual">ãƒ‘ãƒ³ãƒ„è‚¡ä¸‹å®Ÿå¯¸ï¼ˆcmï¼‰</label>
                        <input type="number" id="inseamActual" name="inseamActual" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="thighCircum">å¤ªã‚‚ã‚‚å‘¨ã‚Šï¼ˆcmï¼‰</label>
                        <input type="number" id="thighCircum" name="thighCircum" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="kneeCircum">è†å‘¨ã‚Šï¼ˆcmï¼‰</label>
                        <input type="number" id="kneeCircum" name="kneeCircum" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="calfCircum">ãµãã‚‰ã¯ãå‘¨ã‚Šï¼ˆcmï¼‰</label>
                        <input type="number" id="calfCircum" name="calfCircum" step="0.1">
                    </div>
                </div>

                <!-- è©³ç´°æ¡å¯¸ -->
                <h4 style="color: #2c3e50; margin: 25px 0 15px 0; padding-bottom: 5px; border-bottom: 1px solid #e0e0e0;">è©³ç´°æ¡å¯¸</h4>
                <div class="measurement-grid">
                    <div class="form-group">
                        <label for="shoulderSlopeLeft">è‚©å‚¾æ–œå·¦ï¼ˆåº¦ï¼‰</label>
                        <input type="number" id="shoulderSlopeLeft" name="shoulderSlopeLeft" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="shoulderSlopeRight">è‚©å‚¾æ–œå³ï¼ˆåº¦ï¼‰</label>
                        <input type="number" id="shoulderSlopeRight" name="shoulderSlopeRight" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="kamaDepth">éŒæ·±ï¼ˆcmï¼‰</label>
                        <input type="number" id="kamaDepth" name="kamaDepth" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="strapLength">ã‚¹ãƒˆãƒ©ãƒƒãƒ—å¯¸ï¼ˆcmï¼‰</label>
                        <input type="number" id="strapLength" name="strapLength" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="overShoulderLength">ã‚ªãƒ¼ãƒãƒ¼ã‚·ãƒ§ãƒ«ãƒ€ãƒ¼å¯¸ï¼ˆcmï¼‰</label>
                        <input type="number" id="overShoulderLength" name="overShoulderLength" step="0.1">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="bodyType">ä½“å‹ã®ç‰¹å¾´ãƒ»æ³¨æ„ç‚¹</label>
                    <textarea id="bodyType" name="bodyType" rows="3" placeholder="ãªã§è‚©ã€ã„ã‹ã‚Šè‚©ã€å·¦å³å·®ãªã©"></textarea>
                </div>
            </div>
        </div>

        <!-- ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»ä»•æ§˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h2 class="section-title">ğŸ‘” ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»ä»•æ§˜</h2>
            <div class="section-content">
                <div class="item-count">
                    ã‚ªãƒ¼ãƒ€ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ æ•°: <span id="itemCount">1</span>ç€
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap;">
                    <h4 style="color: #2c3e50; margin: 0;">ã‚ªãƒ¼ãƒ€ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ä¸€è¦§</h4>
                    <button type="button" class="add-item-btn" onclick="addStyleItem()">+ ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ </button>
                </div>
                
                <div id="styleItemsContainer">
                    <!-- åˆæœŸã‚¢ã‚¤ãƒ†ãƒ  -->
                    <div class="style-item" data-item="1">
                        <div class="item-header">
                            <h5>ã‚¢ã‚¤ãƒ†ãƒ  1</h5>
                            <button type="button" class="remove-item-btn" onclick="removeStyleItem(1)" style="display: none;">å‰Šé™¤</button>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="itemType_1">ã‚¢ã‚¤ãƒ†ãƒ ã‚¿ã‚¤ãƒ—</label>
                                <select id="itemType_1" name="itemType_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="Suit(2P)">Suit(2P)</option>
                                    <option value="Suit(3P)">Suit(3P)</option>
                                    <option value="Suit+Pants">Suit+Pants</option>
                                    <option value="Suit(3P)+Pants">Suit(3P)+Pants</option>
                                    <option value="Jacket(S)">Jacket(S)</option>
                                    <option value="Jacket(D)">Jacket(D)</option>
                                    <option value="Vest">Vest</option>
                                    <option value="Pants">Pants</option>
                                    <option value="D Suit">D Suit</option>
                                    <option value="D Suit(3P)">D Suit(3P)</option>
                                    <option value="D Suit+Pants">D Suit+Pants</option>
                                    <option value="D Suit(3P)+Pants">D Suit(3P)+Pants</option>
                                    <option value="Shirts">Shirts</option>
                                    <option value="Tie">Tie</option>
                                    <option value="Repair">Repair</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="fabric_1">ç”Ÿåœ°</label>
                                <input type="text" id="fabric_1" name="fabric_1" placeholder="ç”Ÿåœ°ç•ªå·ãƒ»åç§°">
                            </div>
                            <div class="form-group">
                                <label for="color_1">è‰²</label>
                                <input type="text" id="color_1" name="color_1">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="jacketStyle_1">ã‚¸ãƒ£ã‚±ãƒƒãƒˆã‚¹ã‚¿ã‚¤ãƒ«</label>
                                <select id="jacketStyle_1" name="jacketStyle_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <optgroup label="ã‚·ãƒ³ã‚°ãƒ«">
                                        <option value="single_2x1">ã‚·ãƒ³ã‚°ãƒ«ï¼’Ã—ï¼‘</option>
                                        <option value="single_1x1">ã‚·ãƒ³ã‚°ãƒ«ï¼‘Ã—ï¼‘</option>
                                        <option value="single_3x1">ã‚·ãƒ³ã‚°ãƒ«ï¼“Ã—ï¼‘</option>
                                    </optgroup>
                                    <optgroup label="ãƒ€ãƒ–ãƒ«">
                                        <option value="double_6x2">ãƒ€ãƒ–ãƒ«ï¼–Ã—ï¼’</option>
                                        <option value="double_4x2">ãƒ€ãƒ–ãƒ«ï¼”Ã—ï¼’</option>
                                        <option value="double_2x1">ãƒ€ãƒ–ãƒ«ï¼’Ã—ï¼‘</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="liningType_1">è£åœ°ä»•æ§˜</label>
                                <select id="liningType_1" name="liningType_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="senuki">èƒŒæŠœã</option>
                                    <option value="soura">ç·è£</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lining_1">è£åœ°</label>
                                <input type="text" id="lining_1" name="lining_1" placeholder="è£åœ°ã®ç¨®é¡ãƒ»è‰²">
                            </div>
                            <div class="form-group">
                                <label for="buttons_1">ãƒœã‚¿ãƒ³</label>
                                <input type="text" id="buttons_1" name="buttons_1" placeholder="ãƒœã‚¿ãƒ³ã®ç¨®é¡ãƒ»æè³ª">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="jacketFit_1">ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ•ã‚£ãƒƒãƒˆ</label>
                                <select id="jacketFit_1" name="jacketFit_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="tight">ã‚¿ã‚¤ãƒˆãƒ•ã‚£ãƒƒãƒˆ</option>
                                    <option value="basic">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ãƒ•ã‚£ãƒƒãƒˆ</option>
                                    <option value="loose">ãƒ«ãƒ¼ã‚ºãƒ•ã‚£ãƒƒãƒˆ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="pantsFit_1">ãƒ‘ãƒ³ãƒ„ãƒ•ã‚£ãƒƒãƒˆ</label>
                                <select id="pantsFit_1" name="pantsFit_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="tight">ã‚¿ã‚¤ãƒˆãƒ•ã‚£ãƒƒãƒˆ</option>
                                    <option value="basic">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ãƒ•ã‚£ãƒƒãƒˆ</option>
                                    <option value="loose">ãƒ«ãƒ¼ã‚ºãƒ•ã‚£ãƒƒãƒˆ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="pantsShape_1">ãƒ‘ãƒ³ãƒ„å½¢çŠ¶</label>
                                <select id="pantsShape_1" name="pantsShape_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="tapered">ãƒ†ãƒ¼ãƒ‘ãƒ¼ãƒ‰</option>
                                    <option value="straight">ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ</option>
                                    <option value="wide">ãƒ¯ã‚¤ãƒ‰</option>
                                    <option value="slight_flare">å°‘ã—ãƒ•ãƒ¬ã‚¢</option>
                                    <option value="flare">ãƒ•ãƒ¬ã‚¢</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="chestPocket_1">èƒ¸ãƒã‚±ãƒƒãƒˆ</label>
                                <select id="chestPocket_1" name="chestPocket_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="barca">ãƒãƒ«ã‚«ãƒã‚±ãƒƒãƒˆ</option>
                                    <option value="box">ç®±ãƒã‚±ãƒƒãƒˆ</option>
                                    <option value="out">ã‚¢ã‚¦ãƒˆãƒã‚±ãƒƒãƒˆ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="waistPocket_1">è…°ãƒã‚±ãƒƒãƒˆ</label>
                                <select id="waistPocket_1" name="waistPocket_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="flap">ãƒ•ãƒ©ãƒƒãƒ—ãƒã‚±ãƒƒãƒˆ</option>
                                    <option value="out">ã‚¢ã‚¦ãƒˆãƒã‚±ãƒƒãƒˆ</option>
                                    <option value="double_piping">ä¸¡ç‰ç¸ãƒã‚±ãƒƒãƒˆï¼ˆãƒ•ãƒ©ãƒƒãƒ—ãªã—ï¼‰</option>
                                    <option value="change">ãƒã‚§ãƒ³ã‚¸ãƒã‚±ãƒƒãƒˆ</option>
                                    <option value="hacking">ãƒãƒƒã‚­ãƒ³ã‚°ãƒã‚±ãƒƒãƒˆ</option>
                                    <option value="hacking_change">ãƒãƒƒã‚­ãƒ³ã‚°ãƒã‚§ãƒ³ã‚¸P</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lapelStyle_1">è¡¿å‹ï¼ˆãƒ©ãƒšãƒ«ãƒ»ã‚«ãƒ©ãƒ¼ï¼‰</label>
                                <select id="lapelStyle_1" name="lapelStyle_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <optgroup label="ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ãƒ¼ãƒ„">
                                        <option value="notched">ãƒãƒƒãƒãƒ‰ãƒ©ãƒšãƒ«ï¼ˆä¸€èˆ¬çš„ï¼‰</option>
                                        <option value="peaked">ãƒ”ãƒ¼ã‚¯ãƒ‰ãƒ©ãƒšãƒ«ï¼ˆå‰£å…ˆï¼‰</option>
                                        <option value="shawl">ã‚·ãƒ§ãƒ¼ãƒ«ã‚«ãƒ©ãƒ¼</option>
                                        <option value="narrow">ãƒŠãƒ­ãƒ¼ãƒ©ãƒšãƒ«</option>
                                        <option value="wide">ãƒ¯ã‚¤ãƒ‰ãƒ©ãƒšãƒ«</option>
                                    </optgroup>
                                    <optgroup label="ã‚·ãƒ£ãƒ„ã‚«ãƒ©ãƒ¼">
                                        <option value="regular_collar">ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ã‚«ãƒ©ãƒ¼</option>
                                        <option value="semi_wide_collar">ã‚»ãƒŸãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                        <option value="wide_collar">ãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                        <option value="horizontal_wide_collar">ãƒ›ãƒªã‚¾ãƒ³ã‚¿ãƒ«ãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                        <option value="round_collar">ãƒ©ã‚¦ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                        <option value="open_collar">ã‚ªãƒ¼ãƒ—ãƒ³ã‚«ãƒ©ãƒ¼</option>
                                        <option value="stand_collar">ã‚¹ã‚¿ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                        <option value="wing_collar">ã‚¦ã‚£ãƒ³ã‚°ã‚«ãƒ©ãƒ¼</option>
                                        <option value="short_regular_collar">ã‚·ãƒ§ãƒ¼ãƒˆãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ã‚«ãƒ©ãƒ¼</option>
                                        <option value="short_semi_wide_collar">ã‚·ãƒ§ãƒ¼ãƒˆã‚»ãƒŸãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                        <option value="short_wide_collar">ã‚·ãƒ§ãƒ¼ãƒˆãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                        <option value="short_horizontal_wide_collar">ã‚·ãƒ§ãƒ¼ãƒˆãƒ›ãƒªã‚¾ãƒ³ã‚¿ãƒ«ãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                        <option value="short_round_collar">ã‚·ãƒ§ãƒ¼ãƒˆãƒ©ã‚¦ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lapelWidth_1">è¡¿å¹…</label>
                                <select id="lapelWidth_1" name="lapelWidth_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <option value="5">5cm</option>
                                    <option value="5.5">5.5cm</option>
                                    <option value="6">6cm</option>
                                    <option value="6.5">6.5cm</option>
                                    <option value="7">7cm</option>
                                    <option value="7.5">7.5cm</option>
                                    <option value="8">8cm</option>
                                    <option value="8.5">8.5cm</option>
                                    <option value="9">9cm</option>
                                    <option value="9.5">9.5cm</option>
                                    <option value="10">10cm</option>
                                    <option value="10.5">10.5cm</option>
                                    <option value="11">11cm</option>
                                    <option value="11.5">11.5cm</option>
                                    <option value="12">12cm</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="cuffStyle_1">ã‚«ãƒ•ã‚¹ï¼ˆè¢–å£ï¼‰</label>
                                <select id="cuffStyle_1" name="cuffStyle_1">
                                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                    <optgroup label="ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ãƒ¼ãƒ„">
                                        <option value="4button">4ã¤ãƒœã‚¿ãƒ³æœ¬åˆ‡ç¾½</option>
                                        <option value="3button">3ã¤ãƒœã‚¿ãƒ³æœ¬åˆ‡ç¾½</option>
                                        <option value="4button_fake">4ã¤ãƒœã‚¿ãƒ³ï¼ˆé£¾ã‚Šï¼‰</option>
                                        <option value="3button_fake">3ã¤ãƒœã‚¿ãƒ³ï¼ˆé£¾ã‚Šï¼‰</option>
                                        <option value="surgeons">ã‚µãƒ¼ã‚¸ãƒ£ãƒ³ã‚«ãƒ•ã‚¹</option>
                                        <option value="kissing">ã‚­ãƒƒã‚·ãƒ³ã‚°ãƒœã‚¿ãƒ³</option>
                                    </optgroup>
                                    <optgroup label="ã‚·ãƒ£ãƒ„ã‚«ãƒ•ã‚¹">
                                        <option value="regular_no_opening">ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ï¼ˆé–‹ããªã—ï¼‰</option>
                                        <option value="small_round">å°ä¸¸</option>
                                        <option value="round_b">ãƒ©ã‚¦ãƒ³ãƒ‰B</option>
                                        <option value="round_c">ãƒ©ã‚¦ãƒ³ãƒ‰C</option>
                                        <option value="cut_corner">è§’è½ã¡</option>
                                        <option value="corn">ã‚³ãƒ¼ãƒ³</option>
                                        <option value="turn_up">ã‚¿ãƒ¼ãƒ³ãƒŠãƒƒãƒ—</option>
                                        <option value="double_cuff">ãƒ€ãƒ–ãƒ«</option>
                                        <option value="arrow">ã‚¢ãƒ­ãƒ¼</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</label>
                            <div class="checkbox-group">
                                <div style="width: 100%; margin-bottom: 10px;">
                                    <strong style="color: #2c3e50;">ã‚¸ãƒ£ã‚±ãƒƒãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="full_stitch_1" name="options_1" data-price="1500" onchange="updateTotalPrice()">
                                    <label for="full_stitch_1">ãƒ•ãƒ«ã‚¹ãƒ†ãƒƒãƒ (Â¥1,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="functional_sleeves_1" name="options_1" data-price="1500" onchange="updateTotalPrice()">
                                    <label for="functional_sleeves_1">æœ¬åˆ‡ç¾½ (Â¥1,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="buttonhole_color_1" name="options_1" data-price="1500" onchange="updateTotalPrice()">
                                    <label for="buttonhole_color_1">ãƒœã‚¿ãƒ³ãƒ›ãƒ¼ãƒ«è‰²å¤‰ãˆ (Â¥1,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="kurumi_button_1" name="options_1" data-price="1500" onchange="updateTotalPrice()">
                                    <label for="kurumi_button_1">ã‚¯ãƒ«ãƒŸé‡¦ (Â¥1,500)</label>
                                </div>
                                
                                <div style="width: 100%; margin: 10px 0;">
                                    <strong style="color: #2c3e50;">è£åœ°ã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="lining_a_1" name="options_1" data-price="2500" onchange="updateTotalPrice()">
                                    <label for="lining_a_1">æœ‰æ–™è£åœ°A (Â¥2,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="lining_b_1" name="options_1" data-price="5000" onchange="updateTotalPrice()">
                                    <label for="lining_b_1">æœ‰æ–™è£åœ°B (Â¥5,000)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="lining_c_1" name="options_1" data-price="17000" onchange="updateTotalPrice()">
                                    <label for="lining_c_1">æœ‰æ–™è£åœ°C (Â¥17,000)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="hiromikaeshi_1" name="options_1" data-price="3500" onchange="updateTotalPrice()">
                                    <label for="hiromikaeshi_1">åºƒè¦‹è¿”ã— (Â¥3,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="odaiba_1" name="options_1" data-price="2500" onchange="updateTotalPrice()">
                                    <label for="odaiba_1">ãŠå°å ´ (Â¥2,500)</label>
                                </div>
                                
                                <div style="width: 100%; margin: 10px 0;">
                                    <strong style="color: #2c3e50;">ãƒœã‚¿ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="button_a_1" name="options_1" data-price="1000" onchange="updateTotalPrice()">
                                    <label for="button_a_1">æœ‰æ–™ãƒœã‚¿ãƒ³A (Â¥1,000)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="button_b_1" name="options_1" data-price="2500" onchange="updateTotalPrice()">
                                    <label for="button_b_1">æœ‰æ–™ãƒœã‚¿ãƒ³B (Â¥2,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="button_c_1" name="options_1" data-price="3900" onchange="updateTotalPrice()">
                                    <label for="button_c_1">æœ‰æ–™ãƒœã‚¿ãƒ³C (Â¥3,900)</label>
                                </div>
                                
                                <div style="width: 100%; margin: 10px 0;">
                                    <strong style="color: #2c3e50;">ãƒ‘ãƒ³ãƒ„ã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="watch_pocket_1" name="options_1" data-price="1500" onchange="updateTotalPrice()">
                                    <label for="watch_pocket_1">ã‚¦ã‚©ãƒƒãƒãƒã‚±ãƒƒãƒˆ (Â¥1,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="full_lining_1" name="options_1" data-price="2500" onchange="updateTotalPrice()">
                                    <label for="full_lining_1">ç·è£ä»•æ§˜ (Â¥2,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="side_adjuster_1" name="options_1" data-price="2500" onchange="updateTotalPrice()">
                                    <label for="side_adjuster_1">ã‚µã‚¤ãƒ‰å°¾éŒ  (Â¥2,500)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="button_fly_1" name="options_1" data-price="1000" onchange="updateTotalPrice()">
                                    <label for="button_fly_1">ãƒœã‚¿ãƒ³ä»•æ§˜ (Â¥1,000)</label>
                                </div>
                                
                                <div style="width: 100%; margin: 10px 0;">
                                    <strong style="color: #2c3e50;">ãƒ™ã‚¹ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="vest_collar_1" name="options_1" data-price="3000" onchange="updateTotalPrice()">
                                    <label for="vest_collar_1">è¡¿ä»˜ã (Â¥3,000)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="vest_back_1" name="options_1" data-price="2000" onchange="updateTotalPrice()">
                                    <label for="vest_back_1">èƒŒå…±ç”Ÿåœ° (Â¥2,000)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="vest_double_1" name="options_1" data-price="3000" onchange="updateTotalPrice()">
                                    <label for="vest_double_1">ãƒ€ãƒ–ãƒ« (Â¥3,000)</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="price_1">ä¾¡æ ¼ï¼ˆå††ï¼‰</label>
                                <input type="number" id="price_1" name="price_1" step="1000" onchange="updateTotalPrice()">
                            </div>
                            <div class="form-group">
                                <label for="deliveryDate_1">ç´æœŸ</label>
                                <input type="date" id="deliveryDate_1" name="deliveryDate_1">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes_1">å‚™è€ƒ</label>
                            <textarea id="notes_1" name="notes_1" rows="2" placeholder="ç‰¹åˆ¥ãªè¦æœ›ã‚„æ³¨æ„äº‹é …"></textarea>
                        </div>
                    </div>
                </div>

                <!-- ç·è¨ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="total-section">
                    <h4 style="color: #2c3e50; margin: 0 0 15px 0;">ä¾¡æ ¼ç·è¨ˆ</h4>
                    <div id="priceBreakdown"></div>
                    <div class="total-row grand-total">
                        <span>å°è¨ˆ</span>
                        <span id="grandTotal">Â¥0</span>
                    </div>
                    
                    <!-- ãƒ‡ã‚£ã‚¹ã‚«ã‚¦ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                    <div style="margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 6px;">
                        <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 120px;">
                                <label style="font-size: 12px; color: #856404;">å‰²å¼•ç‡ï¼ˆ%ï¼‰</label>
                                <input type="number" id="discountPercent" min="0" max="100" step="0.1" 
                                       style="width: 100%; padding: 8px; border: 2px solid #ffeaa7; border-radius: 4px;"
                                       placeholder="10" onchange="updateDiscount('percent')">
                            </div>
                            <div style="padding-top: 20px;">ã¾ãŸã¯</div>
                            <div style="flex: 1; min-width: 150px;">
                                <label style="font-size: 12px; color: #856404;">å‰²å¼•é¡ï¼ˆå††ï¼‰</label>
                                <input type="number" id="discountAmount" min="0" step="100" 
                                       style="width: 100%; padding: 8px; border: 2px solid #ffeaa7; border-radius: 4px;"
                                       placeholder="5000" onchange="updateDiscount('amount')">
                            </div>
                        </div>
                        <div style="margin-top: 10px; text-align: right; color: #856404; font-weight: bold;">
                            å‰²å¼•é¡: <span id="discountDisplay" style="color: #d63031;">-Â¥0</span>
                        </div>
                    </div>
                    
                    <!-- æœ€çµ‚ä¾¡æ ¼ã¨å†…é‡‘ãƒ»æ®‹é‡‘ -->
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #3498db;">
                        <div class="total-row grand-total" style="color: #2c3e50; font-size: 22px;">
                            <span>æœ€çµ‚ä¾¡æ ¼</span>
                            <span id="finalTotal">Â¥0</span>
                        </div>
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e0e0e0;">
                            <div class="total-row" style="color: #666;">
                                <span>å†…é‡‘</span>
                                <span id="depositDisplay">Â¥0</span>
                            </div>
                            <div class="total-row" style="font-weight: bold; color: #e74c3c; font-size: 18px;">
                                <span>æ®‹é‡‘</span>
                                <span id="balanceDisplay">Â¥0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ãŠæ”¯æ‰•ã„ãƒ»ç´æœŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section" id="payment-section">
            <h2 class="section-title">ğŸ’° ãŠæ”¯æ‰•ã„ãƒ»ç´æœŸ</h2>
            <div class="section-content">
                <div class="form-row">
                    <div class="form-group">
                        <label for="paymentMethod">ãŠæ”¯æ‰•ã„æ–¹æ³•</label>
                        <select id="paymentMethod" name="paymentMethod">
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="cash">ç¾é‡‘</option>
                            <option value="card">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰</option>
                            <option value="transfer">éŠ€è¡ŒæŒ¯è¾¼</option>
                            <option value="installment">åˆ†å‰²æ‰•ã„</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="deposit">å†…é‡‘ï¼ˆå††ï¼‰</label>
                        <input type="number" id="deposit" name="deposit" step="1000" onchange="updateBalance()">
                    </div>
                    <div class="form-group">
                        <label for="balance">æ®‹é‡‘ï¼ˆå††ï¼‰</label>
                        <input type="number" id="balance" name="balance" step="1000" readonly style="background-color: #f5f5f5;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="orderDate">å—æ³¨æ—¥</label>
                        <input type="date" id="orderDate" name="orderDate">
                    </div>
                    <div class="form-group">
                        <label for="fittingDate">ä¸­ç¸«ã„æ—¥</label>
                        <input type="date" id="fittingDate" name="fittingDate">
                    </div>
                    <div class="form-group">
                        <label for="completionDate">ä»•ä¸ŠãŒã‚Šäºˆå®šæ—¥</label>
                        <input type="date" id="completionDate" name="completionDate">
                    </div>
                </div>
            </div>
        </div>

        <!-- å‚™è€ƒãƒ»ãã®ä»–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h2 class="section-title">ğŸ“ å‚™è€ƒãƒ»ãã®ä»–</h2>
            <div class="section-content">
                <div class="form-group">
                    <label for="generalNotes">å…¨èˆ¬å‚™è€ƒ</label>
                    <textarea id="generalNotes" name="generalNotes" class="notes-area" placeholder="ç‰¹åˆ¥ãªè¦æœ›ã€æ³¨æ„äº‹é …ã€ãã®ä»–"></textarea>
                </div>
            </div>
        </div>

        <!-- ä¿å­˜ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
        <div class="save-section">
            <h3 style="text-align: center; color: #2c3e50; margin: 20px 0;">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h3>
            
            <!-- é¡§å®¢åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ -->
            <div style="margin-bottom: 30px; padding: 20px; background: #e3f2fd; border-radius: 8px;">
                <h4 style="color: #1976d2; margin-bottom: 15px;">ğŸ‘¥ è¤‡æ•°é¡§å®¢ç®¡ç†</h4>
                <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                    <select id="customerSelect" style="flex: 1; min-width: 200px; padding: 10px; border-radius: 8px; border: 2px solid #1976d2;">
                        <option value="">é¡§å®¢ã‚’é¸æŠ...</option>
                    </select>
                    <button type="button" class="download-btn" style="background: linear-gradient(135deg, #1976d2, #1565c0); min-width: auto; padding: 10px 20px;" onclick="loadCustomerData()">èª­è¾¼</button>
                    <button type="button" class="download-btn" style="background: linear-gradient(135deg, #f44336, #d32f2f); min-width: auto; padding: 10px 20px;" onclick="deleteCustomerData()">å‰Šé™¤</button>
                </div>
                <button type="button" class="download-btn" style="background: linear-gradient(135deg, #4caf50, #388e3c); width: 100%;" onclick="saveAsNewCustomer()">
                    â• ç¾åœ¨ã®å…¥åŠ›ã‚’æ–°è¦é¡§å®¢ã¨ã—ã¦ä¿å­˜
                </button>
                <button type="button" class="download-btn" style="background: linear-gradient(135deg, #ff9800, #f57c00); width: 100%; margin-top: 10px;" onclick="updateCurrentCustomer()">
                    ğŸ’¾ ç¾åœ¨ã®é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’ä¸Šæ›¸ãä¿å­˜
                </button>
            </div>
            
            <!-- ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒœã‚¿ãƒ³ -->
            <button type="button" class="download-btn" onclick="saveToCSV()">ğŸ“Š CSVä¿å­˜ï¼ˆãƒ‡ãƒ¼ã‚¿ç®¡ç†ç”¨ï¼‰</button>
            
            <!-- å°åˆ·ãƒ»PDFå‡ºåŠ› -->
            <button type="button" class="print-preview-btn download-btn" onclick="printPreview()">ğŸ–¨ï¸ A4å°åˆ·ãƒ»PDFå‡ºåŠ›</button>
            
            <!-- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨ -->
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                <p style="text-align: center; color: #7f8c8d; font-size: 14px; margin-bottom: 10px;">ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³</p>
                <button type="button" class="download-btn" onclick="window.print()">ğŸ–¨ï¸ å°åˆ·ãƒ»PDFå‡ºåŠ›</button>
                <button type="button" class="download-btn" onclick="clearForm()">ğŸ”„ ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢ï¼ˆæ–°è¦å…¥åŠ›ï¼‰</button>
            </div>
        </div>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆHTMLæœ¬ä½“ã®æœ€å¾Œã«è¿½åŠ ï¼‰ -->
    <div id="filenameModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“„ PDFä¿å­˜ç”¨ãƒ•ã‚¡ã‚¤ãƒ«å</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: #666; margin-bottom: 15px;">ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€PDFä¿å­˜æ™‚ã«ã”ä½¿ç”¨ãã ã•ã„ã€‚</p>
                <div id="filenameDisplay" class="filename-display" onclick="selectFilename()">
                    CRMé¡§å®¢ãƒ‡ãƒ¼ã‚¿_å±±ç”°å¤ªéƒ_20250612.pdf
                </div>
                <button id="copyButton" class="copy-button" onclick="copyFilename()">
                    <span id="copyIcon">ğŸ“‹</span>
                    <span id="copyText">ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚³ãƒ”ãƒ¼</span>
                </button>
                <div class="modal-instructions">
                    <h4>ğŸ“ ä½¿ç”¨æ‰‹é †</h4>
                    <ol>
                        <li>ä¸Šè¨˜ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™</li>
                        <li>ã€Œå°åˆ·ã‚’ç¶šã‘ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™</li>
                        <li>å°åˆ·ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ã€ŒPDFã¨ã—ã¦ä¿å­˜ã€ã‚’é¸æŠã—ã¾ã™</li>
                        <li>ãƒ•ã‚¡ã‚¤ãƒ«åæ¬„ã«ãƒšãƒ¼ã‚¹ãƒˆï¼ˆCtrl+V ã¾ãŸã¯ Cmd+Vï¼‰ã—ã¾ã™</li>
                        <li>ä¿å­˜ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å®Œäº†ã§ã™</li>
                    </ol>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary" onclick="closeModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="modal-button primary" onclick="proceedToPrint()">å°åˆ·ã‚’ç¶šã‘ã‚‹ â†’</button>
            </div>
        </div>
    </div>

    <script>
// =====================================
// CRMã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ãƒ¼ãƒˆ æ”¹å–„ç‰ˆJavaScript
// ä¿®æ­£ç®‡æ‰€ï¼šæ³¨æ–‡ç•ªå·å½¢å¼ã¨CSVå‡ºåŠ›
// ===================================== 

// åŸºæœ¬è¨­å®šã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
const CRM_API_URL = 'https://script.google.com/macros/s/AKfycbxxap6gn_T7T5rRnCGfACRtQC6tXtSfNjWPtZ2ip4bftZ8JoR11un2u04mdSEpIHNDiHg/exec';
let itemCounter = 1;
let nextItemId = 2;
let currentCustomerId = null;
let orderSequence = 1; // é€£ç•ªç®¡ç†ç”¨

// =============================================================================
// ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
// =============================================================================

document.addEventListener('DOMContentLoaded', function() {
    console.log('CRMã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...');
    console.log('API URL:', CRM_API_URL);
    
    // ç¾åœ¨ã®æ—¥ä»˜ã¨æ³¨æ–‡ç•ªå·ã‚’è¨­å®š
    const now = new Date();
    const dateStr = now.getFullYear() + '/' + 
                   String(now.getMonth() + 1).padStart(2, '0') + '/' + 
                   String(now.getDate()).padStart(2, '0');
    
    const currentDateElement = document.getElementById('currentDate');
    if (currentDateElement) {
        currentDateElement.textContent = dateStr;
    }
    
    // æ–°ã—ã„æ³¨æ–‡ç•ªå·å½¢å¼ï¼šå—æ³¨æ—¥_SB_é€£ç•ª
    const orderNo = generateOrderNumber();
    
    const orderNumberElement = document.getElementById('orderNumber');
    if (orderNumberElement) {
        orderNumberElement.textContent = orderNo;
    }

    // å¿…é ˆé …ç›®æ©Ÿèƒ½ã®åˆæœŸåŒ–
    initializeBirthDateDropdowns();
    setupRealTimeValidation();
    setupKanaAutoGeneration();
    setupMobileNavigation();
    
    // åŸºæœ¬æ©Ÿèƒ½ã®åˆæœŸåŒ–
    updateItemCount();
    updateRemoveButtons();
    updateTotalPrice();
    checkEssentialFields();
    
    // é¡§å®¢ãƒªã‚¹ãƒˆã®åˆæœŸåŒ–
    loadCustomerList();
    
    // è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é–‹å§‹ï¼ˆlocalStorageåˆ©ç”¨å¯èƒ½ãªå ´åˆã®ã¿ï¼‰
    if (typeof(Storage) !== "undefined" && !isInSandbox()) {
        setupAutoBackup();
        loadOrderSequence(); // ä¿å­˜ã•ã‚ŒãŸé€£ç•ªã‚’èª­ã¿è¾¼ã¿
    }
    
    showStatusMessage('ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸã€‚', 'info');
    console.log('åˆæœŸåŒ–å®Œäº†');
});

// =============================================================================
// æ³¨æ–‡ç•ªå·ç”Ÿæˆï¼ˆæ–°å½¢å¼ï¼‰
// =============================================================================

function generateOrderNumber() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const dateStr = `${year}${month}${day}`;
    
    // é€£ç•ªã¯3æ¡ã§ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°
    const sequence = String(orderSequence).padStart(3, '0');
    
    return `${dateStr}_SB_${sequence}`;
}

function loadOrderSequence() {
    // LocalStorageã‹ã‚‰é€£ç•ªã‚’èª­ã¿è¾¼ã¿
    const saved = localStorage.getItem('orderSequence');
    const today = new Date().toISOString().split('T')[0];
    const lastDate = localStorage.getItem('lastOrderDate');
    
    if (lastDate === today && saved) {
        orderSequence = parseInt(saved) || 1;
    } else {
        // æ–°ã—ã„æ—¥ä»˜ã®å ´åˆã¯é€£ç•ªã‚’ãƒªã‚»ãƒƒãƒˆ
        orderSequence = 1;
        localStorage.setItem('lastOrderDate', today);
    }
}

function incrementOrderSequence() {
    orderSequence++;
    localStorage.setItem('orderSequence', orderSequence);
}

// =============================================================================
// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ©Ÿèƒ½
// =============================================================================

function showStatusMessage(message, type = 'info') {
    const statusDiv = document.getElementById('statusMessage');
    if (statusDiv) {
        statusDiv.className = `status-message status-${type}`;
        statusDiv.textContent = message;
        statusDiv.style.display = 'block';
        
        setTimeout(() => {
            statusDiv.style.display = 'none';
        }, 5000);
    } else {
        alert(`${type.toUpperCase()}: ${message}`);
    }
}

// =============================================================================
// ãƒ•ãƒªã‚¬ãƒŠè‡ªå‹•ç”Ÿæˆæ©Ÿèƒ½
// =============================================================================

function setupKanaAutoGeneration() {
    const fullNameField = document.getElementById('fullName');
    const fullNameKanaField = document.getElementById('fullNameKana');
    
    if (fullNameField && fullNameKanaField) {
        // ç°¡æ˜“çš„ãªã‚«ãƒŠå¤‰æ›ï¼ˆå®Ÿéš›ã®å¤‰æ›ã¯åˆ¥é€”ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨æ¨å¥¨ï¼‰
        fullNameField.addEventListener('input', function() {
            // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¨ã—ã¦åŒã˜å€¤ã‚’è¨­å®šï¼ˆå®Ÿéš›ã¯IMEã®ã‚«ãƒŠå¤‰æ›APIã‚’ä½¿ç”¨ï¼‰
            if (!fullNameKanaField.value) {
                // ã‚«ãƒŠãŒæœªå…¥åŠ›ã®å ´åˆã®ã¿ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤º
                fullNameKanaField.placeholder = this.value ? `${this.value} ã®ãƒ•ãƒªã‚¬ãƒŠã‚’å…¥åŠ›` : 'ãƒ¤ãƒãƒ€ ã‚¿ãƒ­ã‚¦';
            }
        });
    }
}

// =============================================================================
// CSVå‡ºåŠ›æ©Ÿèƒ½ï¼ˆä¿®æ­£ç‰ˆï¼‰
// =============================================================================

function saveToCSV() {
    try {
        const headers = [
            'A_é¡§å®¢ID', 'B_å§“å', 'C_å§“åãƒ•ãƒªã‚¬ãƒŠ', 'D_ç”Ÿå¹´æœˆæ—¥', 'E_æ€§åˆ¥', 'F_è·æ¥­',
            'G_éƒµä¾¿ç•ªå·', 'H_éƒ½é“åºœçœŒ', 'I_ä½æ‰€',
            'J_é›»è©±ç•ªå·', 'K_ç´¹ä»‹è€…æ§˜', 'L_èº«é•·', 'M_ä½“é‡', 'N_èƒ¸å›²', 'O_ã‚¦ã‚¨ã‚¹ãƒˆ', 
            'P_ãƒ’ãƒƒãƒ—', 'Q_è‚©å¹…', 'R_ä¸Šç€ä¸ˆ', 'S_é¦–å›ã‚Š',
            'T_è¢–ä¸ˆå·¦', 'U_è¢–ä¸ˆå³', 'V_è£„ä¸ˆ', 'W_AH', 'X_äºŒã®è…•å‘¨ã‚Š',
            'Y_è‚˜å‘¨ã‚Š', 'Z_æ‰‹é¦–å‘¨ã‚Š', 'AA_ãƒ™ã‚¹ãƒˆä¸ˆ', 'AB_ãƒ‘ãƒ³ãƒ„ã‚¦ã‚¨ã‚¹ãƒˆ',
            'AC_è‚¡ä¸Š', 'AD_è‚¡ä¸‹', 'AE_ãƒ‘ãƒ³ãƒ„ç·ä¸ˆ', 'AF_ãƒ‘ãƒ³ãƒ„è‚¡ä¸‹å®Ÿå¯¸',
            'AG_å¤ªã‚‚ã‚‚å‘¨ã‚Š', 'AH_è†å‘¨ã‚Š', 'AI_ãµãã‚‰ã¯ãå‘¨ã‚Š',
            'AJ_è‚©å‚¾æ–œå·¦', 'AK_è‚©å‚¾æ–œå³', 'AL_éŒæ·±', 'AM_ã‚¹ãƒˆãƒ©ãƒƒãƒ—å¯¸',
            'AN_ã‚ªãƒ¼ãƒãƒ¼ã‚·ãƒ§ãƒ«ãƒ€ãƒ¼å¯¸', 'AO_ä½“å‹',
            'AP_ã‚¢ã‚¤ãƒ†ãƒ ç¨®é¡', 'AQ_ç”Ÿåœ°', 'AR_è‰²', 'AS_ã‚¸ãƒ£ã‚±ãƒƒãƒˆã‚¹ã‚¿ã‚¤ãƒ«', 'AT_è£åœ°ä»•æ§˜',
            'AU_è£åœ°', 'AV_ãƒœã‚¿ãƒ³', 'AW_ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ•ã‚£ãƒƒãƒˆ', 'AX_ãƒ‘ãƒ³ãƒ„ãƒ•ã‚£ãƒƒãƒˆ',
            'AY_ãƒ‘ãƒ³ãƒ„å½¢çŠ¶', 'AZ_èƒ¸ãƒã‚±ãƒƒãƒˆ', 'BA_è…°ãƒã‚±ãƒƒãƒˆ', 'BB_è¡¿å‹',
            'BC_è¡¿å¹…', 'BD_ã‚«ãƒ•ã‚¹', 'BE_ã‚ªãƒ—ã‚·ãƒ§ãƒ³', 'BF_ä¾¡æ ¼', 'BG_ç´æœŸ', 'BH_å‚™è€ƒ',
            'BI_å‰²å¼•ç‡', 'BJ_å‰²å¼•é¡', 'BK_å°è¨ˆ', 'BL_å‰²å¼•(%)å‰²å¼•é¡',
            'BM_å‰²å¼•å¾Œ', 'BN_æ”¯æ‰•æ–¹æ³•', 'BO_å†…é‡‘', 'BP_æ®‹é‡‘',
            'BQ_å—æ³¨æ—¥', 'BR_ä¸­ç¸«ã„æ—¥', 'BS_ä»•ä¸ŠãŒã‚Šäºˆå®šæ—¥', 'BT_å…¨èˆ¬å‚™è€ƒ',
            'BU_æ³¨æ–‡ç•ªå·'
        ];
        
        const data = [];
        const styleItems = document.querySelectorAll('.style-item');
        
        // é¡§å®¢æƒ…å ±ï¼ˆå§“åã‚’çµåˆï¼‰
        const fullName = document.getElementById('fullName')?.value || '';
        const fullNameKana = document.getElementById('fullNameKana')?.value || '';
        
        // ç”Ÿå¹´æœˆæ—¥ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        const birthDate = document.getElementById('birthDate')?.value || '';
        
        styleItems.forEach((item, index) => {
            const itemId = item.getAttribute('data-item');
            const row = [];
            
            // Aåˆ—ï¼šé¡§å®¢IDï¼ˆæ–°ã—ã„æ³¨æ–‡ç•ªå·å½¢å¼ï¼‰
            row.push(document.getElementById('orderNumber')?.textContent || generateOrderNumber());
            
            // Båˆ—ï¼šå§“åï¼ˆçµåˆæ¸ˆã¿ï¼‰
            row.push(fullName);
            
            // Cåˆ—ï¼šå§“åãƒ•ãƒªã‚¬ãƒŠï¼ˆçµåˆæ¸ˆã¿ï¼‰
            row.push(fullNameKana);
            
            // Dåˆ—ï¼šç”Ÿå¹´æœˆæ—¥
            row.push(birthDate);
            
            // E-Jåˆ—ï¼šæ€§åˆ¥ã€œç´¹ä»‹è€…æ§˜
            row.push(document.getElementById('gender')?.value || '');
            row.push(document.getElementById('occupation')?.value || '');
            row.push(document.getElementById('postalCode')?.value || '');
            row.push(document.getElementById('prefecture')?.value || '');
            row.push(document.getElementById('address')?.value || '');
            row.push(document.getElementById('phone')?.value || '');
            row.push(document.getElementById('referrer')?.value || '');
            
            // L-AOåˆ—ï¼šæ¡å¯¸æƒ…å ±
            const measurements = [
                'height', 'weight', 'chest', 'waist', 'hip', 'shoulderWidth',
                'jacketLength', 'neckSize', 'armLengthLeft', 'armLengthRight',
                'yokoLength', 'armHole', 'upperArmCircum', 'elbowCircum',
                'wristCircum', 'vestLength', 'pantWaist', 'crotchDepth',
                'inseam', 'pantTotalLength', 'inseamActual', 'thighCircum',
                'kneeCircum', 'calfCircum', 'shoulderSlopeLeft', 'shoulderSlopeRight',
                'kamaDepth', 'strapLength', 'overShoulderLength', 'bodyType'
            ];
            
            measurements.forEach(m => {
                const value = document.getElementById(m)?.value || '';
                row.push(value);
            });
            
            // AP-BHåˆ—ï¼šã‚¹ã‚¿ã‚¤ãƒ«æƒ…å ±
            const styleFields = [
                'itemType', 'fabric', 'color', 'jacketStyle', 'liningType',
                'lining', 'buttons', 'jacketFit', 'pantsFit', 'pantsShape',
                'chestPocket', 'waistPocket', 'lapelStyle', 'lapelWidth',
                'cuffStyle'
            ];
            
            styleFields.forEach(field => {
                const value = document.getElementById(`${field}_${itemId}`)?.value || '';
                row.push(value);
            });
            
            // BEåˆ—ï¼šã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆãƒã‚§ãƒƒã‚¯ã•ã‚ŒãŸã‚‚ã®ã‚’é€£çµï¼‰
            const options = [];
            let optionsTotal = 0;
            const checkboxes = item.querySelectorAll('input[type="checkbox"]:checked');
            checkboxes.forEach(cb => {
                const label = cb.nextElementSibling?.textContent || '';
                options.push(label.trim());
                const price = parseFloat(cb.getAttribute('data-price') || 0);
                optionsTotal += price;
            });
            row.push(options.join('ã€'));
            
            // BFåˆ—ï¼šä¾¡æ ¼ï¼ˆåŸºæœ¬ä¾¡æ ¼ï¼‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»£é‡‘ã®åˆè¨ˆï¼‰
            const basePrice = parseFloat(document.getElementById(`price_${itemId}`)?.value || 0);
            const totalPrice = basePrice + optionsTotal;
            row.push(totalPrice);
            
            // BG-BHåˆ—ï¼šç´æœŸã€å‚™è€ƒ
            row.push(document.getElementById(`deliveryDate_${itemId}`)?.value || '');
            row.push(document.getElementById(`notes_${itemId}`)?.value || '');
            
            // BI-BPåˆ—ï¼šä¾¡æ ¼è¨ˆç®—é–¢é€£
            const discountPercent = document.getElementById('discountPercent')?.value || '0';
            const discountAmount = document.getElementById('discountAmount')?.value || '0';
            const grandTotalText = document.getElementById('grandTotal')?.textContent || 'Â¥0';
            const grandTotal = grandTotalText.replace(/[Â¥,]/g, '');
            const finalTotalText = document.getElementById('finalTotal')?.textContent || 'Â¥0';
            const finalTotal = finalTotalText.replace(/[Â¥,]/g, '');
            
            row.push(discountPercent); // BI_å‰²å¼•ç‡
            row.push(discountAmount); // BJ_å‰²å¼•é¡
            row.push(grandTotal); // BK_å°è¨ˆ
            row.push(discountAmount); // BL_å‰²å¼•é¡ï¼ˆå†æ²ï¼‰
            row.push(finalTotal); // BM_å‰²å¼•å¾Œ
            
            row.push(document.getElementById('paymentMethod')?.value || ''); // BN_æ”¯æ‰•æ–¹æ³•
            row.push(document.getElementById('deposit')?.value || ''); // BO_å†…é‡‘
            row.push(document.getElementById('balance')?.value || ''); // BP_æ®‹é‡‘
            
            // BQ-BSåˆ—ï¼šæ—¥ç¨‹
            row.push(document.getElementById('orderDate')?.value || '');
            row.push(document.getElementById('fittingDate')?.value || '');
            row.push(document.getElementById('completionDate')?.value || '');
            
            // BTåˆ—ï¼šå…¨èˆ¬å‚™è€ƒ
            row.push(document.getElementById('generalNotes')?.value || '');
            
            // BUåˆ—ï¼šæ³¨æ–‡ç•ªå·ï¼ˆæ–°å½¢å¼ï¼‰
            row.push(document.getElementById('orderNumber')?.textContent || generateOrderNumber());
            
            data.push(row);
        });
        
        // CSVæ–‡å­—åˆ—ã‚’ä½œæˆï¼ˆBOMä»˜ãUTF-8ï¼‰
        const BOM = '\uFEFF';
        let csvContent = BOM + headers.join(',') + '\n';
        
        data.forEach(row => {
            const escapedRow = row.map(cell => {
                const cellStr = String(cell || '');
                if (cellStr.includes(',') || cellStr.includes('"') || cellStr.includes('\n')) {
                    return `"${cellStr.replace(/"/g, '""')}"`;
                }
                return cellStr;
            });
            csvContent += escapedRow.join(',') + '\n';
        });
        
        // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);
        
        // ãƒ•ã‚¡ã‚¤ãƒ«åã«æ³¨æ–‡ç•ªå·ã‚’ä½¿ç”¨
        const orderNo = document.getElementById('orderNumber')?.textContent || generateOrderNumber();
        const customerName = fullName || 'é¡§å®¢åæœªå…¥åŠ›';
        const filename = `ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ãƒ¼ãƒˆ_${customerName}_${orderNo}.csv`;
        
        link.setAttribute('href', url);
        link.setAttribute('download', filename);
        link.style.visibility = 'hidden';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        showStatusMessage('âœ… CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
        
        // æ¬¡å›ã®ãŸã‚ã«é€£ç•ªã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
        incrementOrderSequence();
        
    } catch (error) {
        console.error('CSVä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
        showStatusMessage('âŒ CSVä¿å­˜ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ', 'error');
    }
}

// =============================================================================
// ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
// =============================================================================

function setupMobileNavigation() {
    // å…¨ã¦ã®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å–å¾—ï¼ˆè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã®ã¿ï¼‰
    const getVisibleInputs = () => {
        const allInputs = document.querySelectorAll('input:not([type="hidden"]):not([type="checkbox"]), select, textarea');
        return Array.from(allInputs).filter(input => {
            const rect = input.getBoundingClientRect();
            return rect.width > 0 && rect.height > 0 && !input.disabled;
        });
    };

    // ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã§æ¬¡ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ç§»å‹•
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            const activeElement = document.activeElement;
            
            // textareaã®å ´åˆã¯æ”¹è¡Œã‚’è¨±å¯
            if (activeElement.tagName === 'TEXTAREA') {
                return;
            }
            
            // submitãƒœã‚¿ãƒ³ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„
            if (activeElement.type === 'submit' || activeElement.type === 'button') {
                return;
            }
            
            e.preventDefault();
            
            const inputs = getVisibleInputs();
            const currentIndex = inputs.indexOf(activeElement);
            
            if (currentIndex >= 0 && currentIndex < inputs.length - 1) {
                const nextInput = inputs[currentIndex + 1];
                nextInput.focus();
                
                // ã‚¹ãƒãƒ›ã®å ´åˆã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç”»é¢ä¸­å¤®ã«è¡¨ç¤º
                if (window.innerWidth <= 768) {
                    setTimeout(() => {
                        nextInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                }
            }
        }
        
        // Shift+Enterã§å‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æˆ»ã‚‹
        if (e.key === 'Enter' && e.shiftKey) {
            e.preventDefault();
            
            const inputs = getVisibleInputs();
            const currentIndex = inputs.indexOf(document.activeElement);
            
            if (currentIndex > 0) {
                const prevInput = inputs[currentIndex - 1];
                prevInput.focus();
                
                if (window.innerWidth <= 768) {
                    setTimeout(() => {
                        prevInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                }
            }
        }
    });

    // ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹ç”¨ã®ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    if ('ontouchstart' in window) {
        addMobileNavigationButtons();
    }
    
    // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã«ãƒ©ãƒ™ãƒ«ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
    document.addEventListener('focusin', function(e) {
        if (e.target.matches('input, select, textarea')) {
            const formGroup = e.target.closest('.form-group');
            if (formGroup) {
                formGroup.classList.add('focused');
            }
        }
    });
    
    document.addEventListener('focusout', function(e) {
        if (e.target.matches('input, select, textarea')) {
            const formGroup = e.target.closest('.form-group');
            if (formGroup) {
                formGroup.classList.remove('focused');
            }
        }
    });
}

// ãƒ¢ãƒã‚¤ãƒ«ç”¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
function addMobileNavigationButtons() {
    // å¿…é ˆé …ç›®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
    const essentialGroups = document.querySelectorAll('.essential-group');
    
    essentialGroups.forEach((group, index) => {
        if (index < essentialGroups.length - 1) {
            const nextButton = document.createElement('button');
            nextButton.type = 'button';
            nextButton.className = 'mobile-next-btn';
            nextButton.innerHTML = 'æ¬¡ã®é …ç›®ã¸ â†’';
            nextButton.onclick = function() {
                const nextGroup = essentialGroups[index + 1];
                const firstInput = nextGroup.querySelector('input, select');
                if (firstInput) {
                    firstInput.focus();
                    nextGroup.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            };
            group.appendChild(nextButton);
        }
    });
}

// =============================================================================
// å¿…é ˆé …ç›®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
// =============================================================================

function initializeBirthDateDropdowns() {
    const yearSelect = document.getElementById('birthYear');
    const daySelect = document.getElementById('birthDay');
    
    if (!yearSelect || !daySelect) {
        console.error('ç”Ÿå¹´æœˆæ—¥ã®ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
        return;
    }
    
    // å¹´ã®é¸æŠè‚¢ã‚’ç”Ÿæˆ
    yearSelect.innerHTML = '<option value="">----</option>';
    const currentYear = new Date().getFullYear();
    for (let year = currentYear; year >= 1920; year--) {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = year + 'å¹´';
        yearSelect.appendChild(option);
    }
    
    // æ—¥ã®åˆæœŸé¸æŠè‚¢ã‚’ç”Ÿæˆï¼ˆ1-31ï¼‰
    daySelect.innerHTML = '<option value="">--</option>';
    for (let day = 1; day <= 31; day++) {
        const option = document.createElement('option');
        option.value = day;
        option.textContent = day + 'æ—¥';
        daySelect.appendChild(option);
    }
    
    const monthSelect = document.getElementById('birthMonth');
    if (monthSelect) {
        monthSelect.addEventListener('change', updateDays);
    }
    if (yearSelect) {
        yearSelect.addEventListener('change', updateDays);
    }
}

function updateDays() {
    const yearSelect = document.getElementById('birthYear');
    const monthSelect = document.getElementById('birthMonth');
    const daySelect = document.getElementById('birthDay');
    
    if (!yearSelect || !monthSelect || !daySelect) return;
    
    const year = parseInt(yearSelect.value);
    const month = parseInt(monthSelect.value);
    
    daySelect.innerHTML = '<option value="">--</option>';
    
    if (year && month) {
        const daysInMonth = new Date(year, month, 0).getDate();
        
        for (let day = 1; day <= daysInMonth; day++) {
            const option = document.createElement('option');
            option.value = day;
            option.textContent = day + 'æ—¥';
            daySelect.appendChild(option);
        }
    }
    
    updateBirthDateField();
}

function updateBirthDateField() {
    const year = document.getElementById('birthYear')?.value;
    const month = document.getElementById('birthMonth')?.value;
    const day = document.getElementById('birthDay')?.value;
    const birthDateField = document.getElementById('birthDate');
    
    if (year && month && day && birthDateField) {
        const formattedDate = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
        birthDateField.value = formattedDate;
    }
    
    checkEssentialFields();
}

function setupRealTimeValidation() {
    // çµ±åˆåå‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const fullNameField = document.getElementById('fullName');
    if (fullNameField) {
        fullNameField.addEventListener('input', function() {
            validateField(this, 'nameCheck');
        });
    }
    
    const phoneField = document.getElementById('phone');
    if (phoneField) {
        phoneField.addEventListener('input', function() {
            validatePhoneNumber(this);
        });
    }
    
    const birthYearField = document.getElementById('birthYear');
    const birthMonthField = document.getElementById('birthMonth');
    const birthDayField = document.getElementById('birthDay');
    
    if (birthYearField) birthYearField.addEventListener('change', updateBirthDateField);
    if (birthMonthField) birthMonthField.addEventListener('change', updateBirthDateField);
    if (birthDayField) birthDayField.addEventListener('change', updateBirthDateField);
    
    const addressField = document.getElementById('address');
    const prefectureField = document.getElementById('prefecture');
    
    if (addressField) {
        addressField.addEventListener('input', function() {
            validateField(this, 'addressCheck');
        });
    }
    
    if (prefectureField) {
        prefectureField.addEventListener('change', function() {
            validateField(this, 'addressCheck');
        });
    }
}

function validateField(field, checkId) {
    const isValid = field.value.trim().length > 0;
    
    if (isValid) {
        field.classList.add('valid');
        field.classList.remove('invalid');
    } else {
        field.classList.remove('valid');
        field.classList.add('invalid');
    }
    
    checkEssentialFields();
}

function validatePhoneNumber(field) {
    const phoneRegex = /^[\d\-\(\)\+\s]{10,15}$/;
    const isValid = phoneRegex.test(field.value.trim());
    
    if (isValid) {
        field.classList.add('valid');
        field.classList.remove('invalid');
    } else {
        field.classList.remove('valid');
        if (field.value.trim().length > 0) {
            field.classList.add('invalid');
        }
    }
    
    checkEssentialFields();
}

function checkEssentialFields() {
    const checks = {
        name: checkNameComplete(),
        phone: checkPhoneComplete(),
        birth: checkBirthComplete(),
        address: checkAddressComplete()
    };
    
    updateCheckMark('nameCheck', checks.name);
    updateCheckMark('phoneCheck', checks.phone);
    updateCheckMark('birthCheck', checks.birth);
    updateCheckMark('addressCheck', checks.address);
    
    updateGroupStatus('name', checks.name);
    updateGroupStatus('phone', checks.phone);
    updateGroupStatus('birth', checks.birth);
    updateGroupStatus('address', checks.address);
    
    updateProgressBar(checks);
}

function checkNameComplete() {
    const fullName = document.getElementById('fullName')?.value.trim() || '';
    return fullName.length > 0;
}

function checkPhoneComplete() {
    const phone = document.getElementById('phone')?.value.trim() || '';
    const phoneRegex = /^[\d\-\(\)\+\s]{10,15}$/;
    return phoneRegex.test(phone);
}

function checkBirthComplete() {
    const year = document.getElementById('birthYear')?.value;
    const month = document.getElementById('birthMonth')?.value;
    const day = document.getElementById('birthDay')?.value;
    return year && month && day;
}

function checkAddressComplete() {
    const prefecture = document.getElementById('prefecture')?.value.trim() || '';
    const address = document.getElementById('address')?.value.trim() || '';
    return prefecture.length > 0 && address.length > 0;
}

function updateCheckMark(checkId, isComplete) {
    const checkMark = document.getElementById(checkId);
    if (checkMark) {
        if (isComplete) {
            checkMark.classList.add('visible');
        } else {
            checkMark.classList.remove('visible');
        }
    }
}

function updateGroupStatus(groupType, isComplete) {
    const groups = document.querySelectorAll('.essential-group');
    
    groups.forEach((group, index) => {
        const groupTypes = ['name', 'phone', 'birth', 'address'];
        if (groupTypes[index] === groupType) {
            if (isComplete) {
                group.classList.add('completed');
            } else {
                group.classList.remove('completed');
            }
        }
    });
}

function updateProgressBar(checks) {
    const completedCount = Object.values(checks).filter(Boolean).length;
    const totalCount = 4;
    const percentage = (completedCount / totalCount) * 100;
    
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    
    if (progressFill) {
        progressFill.style.width = percentage + '%';
    }
    
    if (progressText) {
        progressText.textContent = `${completedCount}/${totalCount}`;
    }
    
    if (completedCount === totalCount) {
        showStatusMessage('âœ… å¿…é ˆé …ç›®ã®å…¥åŠ›ãŒå®Œäº†ã—ã¾ã—ãŸï¼', 'success');
    }
}

// ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒãƒã‚§ãƒƒã‚¯
function isInSandbox() {
    try {
        localStorage.setItem('test', 'test');
        localStorage.removeItem('test');
        return false;
    } catch (e) {
        return true;
    }
}

// =============================================================================
// ä½æ‰€æ¤œç´¢æ©Ÿèƒ½ï¼ˆä»£æ›¿æ–¹æ³•ã‚’å«ã‚€ï¼‰
// =============================================================================

function lookupAddress() {
    const postalCode = document.getElementById('postalCode')?.value.trim();
    
    if (!postalCode) {
        showStatusMessage('éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'info');
        return;
    }
    
    const cleanPostalCode = postalCode.replace(/[^0-9]/g, '');
    
    if (cleanPostalCode.length !== 7) {
        showStatusMessage('æ­£ã—ã„éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ7æ¡ï¼‰', 'error');
        return;
    }
    
    showStatusMessage('ä½æ‰€ã‚’æ¤œç´¢ä¸­...', 'info');
    
    // éƒµä¾¿ç•ªå·APIï¼ˆãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã¾ãŸã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®ã¿å‹•ä½œï¼‰
    const apiUrl = `https://zipcloud.ibsnet.co.jp/api/search?zipcode=${cleanPostalCode}`;
    
    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            if (data.results && data.results.length > 0) {
                const result = data.results[0];
                
                const prefectureSelect = document.getElementById('prefecture');
                if (prefectureSelect) {
                    prefectureSelect.value = result.address1;
                }
                
                const addressField = document.getElementById('address');
                if (addressField) {
                    addressField.value = result.address2 + result.address3;
                    addressField.focus();
                }
                
                showStatusMessage('âœ… ä½æ‰€ã‚’è‡ªå‹•å…¥åŠ›ã—ã¾ã—ãŸ', 'success');
                checkEssentialFields();
            } else {
                showStatusMessage('âŒ ä½æ‰€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ', 'error');
            }
        })
        .catch(error => {
            console.error('ä½æ‰€æ¤œç´¢ã‚¨ãƒ©ãƒ¼:', error);
            // ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
            showStatusMessage('âŒ ä½æ‰€æ¤œç´¢æ©Ÿèƒ½ã¯ç¾åœ¨åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚', 'error');
        });
}

// =============================================================================
// ã‚¹ã‚¿ã‚¤ãƒ«ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†
// =============================================================================

function addStyleItem() {
    const container = document.getElementById('styleItemsContainer');
    const newItem = document.createElement('div');
    newItem.className = 'style-item adding';
    newItem.setAttribute('data-item', nextItemId);
    
    newItem.innerHTML = createStyleItemHTML(nextItemId);
    
    container.appendChild(newItem);
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
    setTimeout(() => {
        newItem.classList.remove('adding');
    }, 300);
    
    itemCounter++;
    nextItemId++;
    updateItemCount();
    updateRemoveButtons();
    updateTotalPrice();
}

function removeStyleItem(itemId) {
    const item = document.querySelector(`.style-item[data-item="${itemId}"]`);
    if (item) {
        item.classList.add('removing');
        setTimeout(() => {
            item.remove();
            itemCounter--;
            updateItemCount();
            updateRemoveButtons();
            updateTotalPrice();
            // ã‚¢ã‚¤ãƒ†ãƒ ç•ªå·ã®å†å‰²ã‚Šå½“ã¦
            renumberItems();
        }, 300);
    }
}

function renumberItems() {
    const items = document.querySelectorAll('.style-item');
    items.forEach((item, index) => {
        const header = item.querySelector('.item-header h5');
        if (header) {
            header.textContent = `ã‚¢ã‚¤ãƒ†ãƒ  ${index + 1}`;
        }
    });
}

function updateItemCount() {
    const countElement = document.getElementById('itemCount');
    if (countElement) {
        countElement.textContent = itemCounter;
    }
}

function updateRemoveButtons() {
    const items = document.querySelectorAll('.style-item');
    items.forEach(item => {
        const removeBtn = item.querySelector('.remove-item-btn');
        if (removeBtn) {
            removeBtn.style.display = items.length > 1 ? 'block' : 'none';
        }
    });
}

// =============================================================================
// ä¾¡æ ¼è¨ˆç®—æ©Ÿèƒ½
// =============================================================================

function updateTotalPrice() {
    let total = 0;
    const priceBreakdown = [];
    
    const styleItems = document.querySelectorAll('.style-item');
    styleItems.forEach((item, index) => {
        const itemId = item.getAttribute('data-item');
        const basePrice = parseFloat(document.getElementById(`price_${itemId}`)?.value || 0);
        
        // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¾¡æ ¼ã®è¨ˆç®—
        let optionsTotal = 0;
        const checkboxes = item.querySelectorAll('input[type="checkbox"]:checked');
        checkboxes.forEach(cb => {
            const price = parseFloat(cb.getAttribute('data-price') || 0);
            optionsTotal += price;
        });
        
        const itemTotal = basePrice + optionsTotal;
        total += itemTotal;
        
        if (itemTotal > 0) {
            priceBreakdown.push(`ã‚¢ã‚¤ãƒ†ãƒ  ${index + 1}: Â¥${itemTotal.toLocaleString()}`);
        }
    });
    
    // ä¾¡æ ¼å†…è¨³ã®è¡¨ç¤º
    const breakdownElement = document.getElementById('priceBreakdown');
    if (breakdownElement) {
        breakdownElement.innerHTML = priceBreakdown.join('<br>');
    }
    
    // å°è¨ˆã®è¡¨ç¤º
    const grandTotalElement = document.getElementById('grandTotal');
    if (grandTotalElement) {
        grandTotalElement.textContent = `Â¥${total.toLocaleString()}`;
    }
    
    // å‰²å¼•è¨ˆç®—
    updateDiscount();
}

function updateDiscount(source) {
    const grandTotalText = document.getElementById('grandTotal')?.textContent || 'Â¥0';
    const grandTotal = parseFloat(grandTotalText.replace(/[Â¥,]/g, '')) || 0;
    
    let discountAmount = 0;
    
    if (source === 'percent') {
        const percent = parseFloat(document.getElementById('discountPercent')?.value || 0);
        discountAmount = Math.round(grandTotal * percent / 100);
        const amountInput = document.getElementById('discountAmount');
        if (amountInput) {
            amountInput.value = discountAmount;
        }
    } else if (source === 'amount') {
        discountAmount = parseFloat(document.getElementById('discountAmount')?.value || 0);
        const percent = grandTotal > 0 ? Math.round(discountAmount / grandTotal * 100 * 10) / 10 : 0;
        const percentInput = document.getElementById('discountPercent');
        if (percentInput) {
            percentInput.value = percent;
        }
    } else {
        // ä¸¡æ–¹ã®å€¤ã‹ã‚‰è¨ˆç®—
        const percent = parseFloat(document.getElementById('discountPercent')?.value || 0);
        const amount = parseFloat(document.getElementById('discountAmount')?.value || 0);
        discountAmount = amount || Math.round(grandTotal * percent / 100);
    }
    
    // å‰²å¼•é¡è¡¨ç¤º
    const discountDisplay = document.getElementById('discountDisplay');
    if (discountDisplay) {
        discountDisplay.textContent = `-Â¥${discountAmount.toLocaleString()}`;
    }
    
    // æœ€çµ‚ä¾¡æ ¼
    const finalTotal = grandTotal - discountAmount;
    const finalTotalElement = document.getElementById('finalTotal');
    if (finalTotalElement) {
        finalTotalElement.textContent = `Â¥${finalTotal.toLocaleString()}`;
    }
    
    // å†…é‡‘ã¨æ®‹é‡‘ã®æ›´æ–°
    updateBalance();
}

function updateBalance() {
    const finalTotalText = document.getElementById('finalTotal')?.textContent || 'Â¥0';
    const finalTotal = parseFloat(finalTotalText.replace(/[Â¥,]/g, '')) || 0;
    const deposit = parseFloat(document.getElementById('deposit')?.value || 0);
    
    const balance = finalTotal - deposit;
    
    const balanceElement = document.getElementById('balance');
    if (balanceElement) {
        balanceElement.value = balance;
    }
    
    // è¡¨ç¤ºç”¨ã®è¦ç´ ã‚‚æ›´æ–°
    const depositDisplay = document.getElementById('depositDisplay');
    if (depositDisplay) {
        depositDisplay.textContent = `Â¥${deposit.toLocaleString()}`;
    }
    
    const balanceDisplay = document.getElementById('balanceDisplay');
    if (balanceDisplay) {
        balanceDisplay.textContent = `Â¥${balance.toLocaleString()}`;
    }
}

// =============================================================================
// ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½
// =============================================================================

function setupAutoBackup() {
    // 5åˆ†ã”ã¨ã«è‡ªå‹•ä¿å­˜
    setInterval(() => {
        const data = collectFormData();
        localStorage.setItem('orderSheet_backup', JSON.stringify(data));
        console.log('è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Œäº†');
    }, 300000);
}

function collectFormData() {
    const data = {
        customer: {},
        measurements: {},
        styleItems: [],
        payment: {},
        notes: {}
    };
    
    // é¡§å®¢æƒ…å ±
    data.customer = {
        fullName: document.getElementById('fullName')?.value || '',
        fullNameKana: document.getElementById('fullNameKana')?.value || '',
        birthDate: document.getElementById('birthDate')?.value || '',
        gender: document.getElementById('gender')?.value || '',
        occupation: document.getElementById('occupation')?.value || '',
        phone: document.getElementById('phone')?.value || '',
        postalCode: document.getElementById('postalCode')?.value || '',
        prefecture: document.getElementById('prefecture')?.value || '',
        address: document.getElementById('address')?.value || '',
        referrer: document.getElementById('referrer')?.value || ''
    };
    
    // æ¡å¯¸æƒ…å ±
    const measurementFields = [
        'height', 'weight', 'chest', 'waist', 'hip', 'shoulderWidth',
        'jacketLength', 'neckSize', 'armLengthLeft', 'armLengthRight',
        'yokoLength', 'armHole', 'upperArmCircum', 'elbowCircum',
        'wristCircum', 'vestLength', 'pantWaist', 'crotchDepth',
        'inseam', 'pantTotalLength', 'inseamActual', 'thighCircum',
        'kneeCircum', 'calfCircum', 'shoulderSlopeLeft', 'shoulderSlopeRight',
        'kamaDepth', 'strapLength', 'overShoulderLength', 'bodyType'
    ];
    
    measurementFields.forEach(field => {
        data.measurements[field] = document.getElementById(field)?.value || '';
    });
    
    // ã‚¹ã‚¿ã‚¤ãƒ«ã‚¢ã‚¤ãƒ†ãƒ 
    document.querySelectorAll('.style-item').forEach(item => {
        const itemId = item.getAttribute('data-item');
        const itemData = {
            id: itemId,
            fields: {},
            options: []
        };
        
        // å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’å–å¾—
        const styleFields = [
            'itemType', 'fabric', 'color', 'jacketStyle', 'liningType',
            'lining', 'buttons', 'jacketFit', 'pantsFit', 'pantsShape',
            'chestPocket', 'waistPocket', 'lapelStyle', 'lapelWidth',
            'cuffStyle', 'price', 'deliveryDate', 'notes'
        ];
        
        styleFields.forEach(field => {
            const element = document.getElementById(`${field}_${itemId}`);
            if (element) {
                itemData.fields[field] = element.value;
            }
        });
        
        // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹
        item.querySelectorAll('input[type="checkbox"]').forEach(cb => {
            itemData.options.push({
                id: cb.id,
                checked: cb.checked
            });
        });
        
        data.styleItems.push(itemData);
    });
    
    // æ”¯æ‰•ã„æƒ…å ±
    data.payment = {
        discountPercent: document.getElementById('discountPercent')?.value || '',
        discountAmount: document.getElementById('discountAmount')?.value || '',
        paymentMethod: document.getElementById('paymentMethod')?.value || '',
        deposit: document.getElementById('deposit')?.value || '',
        orderDate: document.getElementById('orderDate')?.value || '',
        fittingDate: document.getElementById('fittingDate')?.value || '',
        completionDate: document.getElementById('completionDate')?.value || ''
    };
    
    // å‚™è€ƒ
    data.notes = {
        generalNotes: document.getElementById('generalNotes')?.value || ''
    };
    
    // æ³¨æ–‡ç•ªå·
    data.orderNumber = document.getElementById('orderNumber')?.textContent || '';
    
    return data;
}

function loadFormData(data) {
    if (!data) return;
    
    // é¡§å®¢æƒ…å ±
    if (data.customer) {
        Object.keys(data.customer).forEach(key => {
            const element = document.getElementById(key);
            if (element) {
                element.value = data.customer[key];
            }
        });
        
        // ç”Ÿå¹´æœˆæ—¥ã®ç‰¹åˆ¥å‡¦ç†
        if (data.customer.birthDate) {
            const parts = data.customer.birthDate.split('-');
            if (parts.length === 3) {
                const yearSelect = document.getElementById('birthYear');
                const monthSelect = document.getElementById('birthMonth');
                const daySelect = document.getElementById('birthDay');
                
                if (yearSelect) yearSelect.value = parts[0];
                if (monthSelect) monthSelect.value = parseInt(parts[1]);
                if (daySelect) daySelect.value = parseInt(parts[2]);
            }
        }
    }
    
    // æ¡å¯¸æƒ…å ±
    if (data.measurements) {
        Object.keys(data.measurements).forEach(key => {
            const element = document.getElementById(key);
            if (element) {
                element.value = data.measurements[key];
            }
        });
    }
    
    // ã‚¹ã‚¿ã‚¤ãƒ«ã‚¢ã‚¤ãƒ†ãƒ 
    if (data.styleItems && data.styleItems.length > 0) {
        // æ—¢å­˜ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¯ãƒªã‚¢
        const container = document.getElementById('styleItemsContainer');
        container.innerHTML = '';
        itemCounter = 0;
        
        // ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å¾©å…ƒ
        data.styleItems.forEach((itemData, index) => {
            const newItem = document.createElement('div');
            newItem.className = 'style-item';
            newItem.setAttribute('data-item', itemData.id);
            newItem.innerHTML = createStyleItemHTML(itemData.id);
            container.appendChild(newItem);
            
            // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’è¨­å®š
            Object.keys(itemData.fields).forEach(field => {
                const element = document.getElementById(`${field}_${itemData.id}`);
                if (element) {
                    element.value = itemData.fields[field];
                }
            });
            
            // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ã‚’å¾©å…ƒ
            itemData.options.forEach(option => {
                const checkbox = document.getElementById(option.id);
                if (checkbox) {
                    checkbox.checked = option.checked;
                }
            });
            
            itemCounter++;
        });
        
        updateItemCount();
        updateRemoveButtons();
    }
    
    // æ”¯æ‰•ã„æƒ…å ±
    if (data.payment) {
        Object.keys(data.payment).forEach(key => {
            const element = document.getElementById(key);
            if (element) {
                element.value = data.payment[key];
            }
        });
    }
    
    // å‚™è€ƒ
    if (data.notes) {
        Object.keys(data.notes).forEach(key => {
            const element = document.getElementById(key);
            if (element) {
                element.value = data.notes[key];
            }
        });
    }
    
    // å„ç¨®æ›´æ–°å‡¦ç†
    checkEssentialFields();
    updateTotalPrice();
}

// =============================================================================
// é¡§å®¢ç®¡ç†æ©Ÿèƒ½
// =============================================================================

function loadCustomerList() {
    const customers = JSON.parse(localStorage.getItem('customers') || '[]');
    const select = document.getElementById('customerSelect');
    
    if (select) {
        select.innerHTML = '<option value="">é¡§å®¢ã‚’é¸æŠ...</option>';
        customers.forEach(customer => {
            const option = document.createElement('option');
            option.value = customer.id;
            option.textContent = `${customer.name} (${customer.orderNumber})`;
            select.appendChild(option);
        });
    }
}

function saveAsNewCustomer() {
    const fullName = document.getElementById('fullName')?.value;
    if (!fullName) {
        showStatusMessage('ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
        return;
    }
    
    const data = collectFormData();
    const customerId = Date.now().toString();
    
    data.id = customerId;
    data.name = fullName;
    data.savedAt = new Date().toISOString();
    
    const customers = JSON.parse(localStorage.getItem('customers') || '[]');
    customers.push({
        id: customerId,
        name: fullName,
        orderNumber: data.orderNumber,
        savedAt: data.savedAt
    });
    
    localStorage.setItem('customers', JSON.stringify(customers));
    localStorage.setItem(`customer_${customerId}`, JSON.stringify(data));
    
    currentCustomerId = customerId;
    loadCustomerList();
    showStatusMessage('âœ… æ–°è¦é¡§å®¢ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ', 'success');
}

function updateCurrentCustomer() {
    if (!currentCustomerId) {
        showStatusMessage('æ›´æ–°ã™ã‚‹é¡§å®¢ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
        return;
    }
    
    const data = collectFormData();
    data.id = currentCustomerId;
    data.savedAt = new Date().toISOString();
    
    localStorage.setItem(`customer_${currentCustomerId}`, JSON.stringify(data));
    showStatusMessage('âœ… é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
}

function loadCustomerData() {
    const select = document.getElementById('customerSelect');
    const customerId = select?.value;
    
    if (!customerId) {
        showStatusMessage('é¡§å®¢ã‚’é¸æŠã—ã¦ãã ã•ã„', 'info');
        return;
    }
    
    const data = JSON.parse(localStorage.getItem(`customer_${customerId}`) || 'null');
    if (data) {
        loadFormData(data);
        currentCustomerId = customerId;
        showStatusMessage('âœ… é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ', 'success');
    } else {
        showStatusMessage('ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
    }
}

function deleteCustomerData() {
    const select = document.getElementById('customerSelect');
    const customerId = select?.value;
    
    if (!customerId) {
        showStatusMessage('å‰Šé™¤ã™ã‚‹é¡§å®¢ã‚’é¸æŠã—ã¦ãã ã•ã„', 'info');
        return;
    }
    
    if (!confirm('ã“ã®é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
        return;
    }
    
    // é¡§å®¢ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤
    const customers = JSON.parse(localStorage.getItem('customers') || '[]');
    const updatedCustomers = customers.filter(c => c.id !== customerId);
    localStorage.setItem('customers', JSON.stringify(updatedCustomers));
    
    // é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
    localStorage.removeItem(`customer_${customerId}`);
    
    // ç¾åœ¨ã®é¡§å®¢IDã‚’ã‚¯ãƒªã‚¢
    if (currentCustomerId === customerId) {
        currentCustomerId = null;
    }
    
    loadCustomerList();
    showStatusMessage('âœ… é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
}

// =============================================================================
// ãƒ•ã‚©ãƒ¼ãƒ ã‚¯ãƒªã‚¢æ©Ÿèƒ½
// =============================================================================

function clearForm() {
    if (!confirm('å…¥åŠ›å†…å®¹ã‚’ã™ã¹ã¦ã‚¯ãƒªã‚¢ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
        return;
    }
    
    // ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒªã‚»ãƒƒãƒˆ
    document.querySelectorAll('input, select, textarea').forEach(element => {
        if (element.type === 'checkbox') {
            element.checked = false;
        } else if (element.id !== 'currentDate' && element.id !== 'orderNumber') {
            element.value = '';
        }
    });
    
    // ã‚¹ã‚¿ã‚¤ãƒ«ã‚¢ã‚¤ãƒ†ãƒ ã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã™
    const container = document.getElementById('styleItemsContainer');
    container.innerHTML = '';
    
    // åˆæœŸã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ 
    const initialItem = document.createElement('div');
    initialItem.className = 'style-item';
    initialItem.setAttribute('data-item', '1');
    initialItem.innerHTML = createStyleItemHTML(1);
    container.appendChild(initialItem);
    
    itemCounter = 1;
    nextItemId = 2;
    currentCustomerId = null;
    
    // æ–°ã—ã„æ³¨æ–‡ç•ªå·ã‚’ç”Ÿæˆ
    incrementOrderSequence();
    const newOrderNo = generateOrderNumber();
    const orderNumberElement = document.getElementById('orderNumber');
    if (orderNumberElement) {
        orderNumberElement.textContent = newOrderNo;
    }
    
    updateItemCount();
    updateRemoveButtons();
    updateTotalPrice();
    checkEssentialFields();
    
    showStatusMessage('âœ… ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ', 'success');
}

// =============================================================================
// å°åˆ·æ©Ÿèƒ½
// =============================================================================

function printPreview() {
    // PDFãƒ•ã‚¡ã‚¤ãƒ«åã®ç”Ÿæˆ
    const fullName = document.getElementById('fullName')?.value || 'é¡§å®¢åæœªå…¥åŠ›';
    const orderNo = document.getElementById('orderNumber')?.textContent || generateOrderNumber();
    const now = new Date();
    const dateStr = now.getFullYear() + 
                   String(now.getMonth() + 1).padStart(2, '0') + 
                   String(now.getDate()).padStart(2, '0');
    
    const filename = `CRMé¡§å®¢ãƒ‡ãƒ¼ã‚¿_${fullName}_${dateStr}.pdf`;
    
    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã«è¡¨ç¤º
    const filenameDisplay = document.getElementById('filenameDisplay');
    if (filenameDisplay) {
        filenameDisplay.textContent = filename;
    }
    
    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
    const modal = document.getElementById('filenameModal');
    if (modal) {
        modal.style.display = 'block';
    }
}

function closeModal() {
    const modal = document.getElementById('filenameModal');
    if (modal) {
        modal.style.display = 'none';
    }
}

function selectFilename() {
    const filenameDisplay = document.getElementById('filenameDisplay');
    if (filenameDisplay) {
        const range = document.createRange();
        range.selectNodeContents(filenameDisplay);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
    }
}

function copyFilename() {
    const filenameDisplay = document.getElementById('filenameDisplay');
    if (filenameDisplay) {
        const text = filenameDisplay.textContent;
        
        // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        navigator.clipboard.writeText(text).then(() => {
            // ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºã‚’å¤‰æ›´
            const copyIcon = document.getElementById('copyIcon');
            const copyText = document.getElementById('copyText');
            const copyButton = document.getElementById('copyButton');
            
            if (copyIcon) copyIcon.textContent = 'âœ…';
            if (copyText) copyText.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
            if (copyButton) copyButton.classList.add('copied');
            
            // 2ç§’å¾Œã«å…ƒã«æˆ»ã™
            setTimeout(() => {
                if (copyIcon) copyIcon.textContent = 'ğŸ“‹';
                if (copyText) copyText.textContent = 'ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚³ãƒ”ãƒ¼';
                if (copyButton) copyButton.classList.remove('copied');
            }, 2000);
        }).catch(err => {
            console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
            showStatusMessage('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
        });
    }
}

function proceedToPrint() {
    closeModal();
    window.print();
}

// =============================================================================
// ã‚¹ã‚¿ã‚¤ãƒ«ã‚¢ã‚¤ãƒ†ãƒ HTMLç”Ÿæˆé–¢æ•°
// =============================================================================

function createStyleItemHTML(itemId) {
    return `
        <div class="item-header">
            <h5>ã‚¢ã‚¤ãƒ†ãƒ  ${itemCounter + 1}</h5>
            <button type="button" class="remove-item-btn" onclick="removeStyleItem(${itemId})">å‰Šé™¤</button>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="itemType_${itemId}">ã‚¢ã‚¤ãƒ†ãƒ ã‚¿ã‚¤ãƒ—</label>
                <select id="itemType_${itemId}" name="itemType_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="Suit(2P)">Suit(2P)</option>
                    <option value="Suit(3P)">Suit(3P)</option>
                    <option value="Suit+Pants">Suit+Pants</option>
                    <option value="Suit(3P)+Pants">Suit(3P)+Pants</option>
                    <option value="Jacket(S)">Jacket(S)</option>
                    <option value="Jacket(D)">Jacket(D)</option>
                    <option value="Vest">Vest</option>
                    <option value="Pants">Pants</option>
                    <option value="D Suit">D Suit</option>
                    <option value="D Suit(3P)">D Suit(3P)</option>
                    <option value="D Suit+Pants">D Suit+Pants</option>
                    <option value="D Suit(3P)+Pants">D Suit(3P)+Pants</option>
                    <option value="Shirts">Shirts</option>
                    <option value="Tie">Tie</option>
                    <option value="Repair">Repair</option>
                </select>
            </div>
            <div class="form-group">
                <label for="fabric_${itemId}">ç”Ÿåœ°</label>
                <input type="text" id="fabric_${itemId}" name="fabric_${itemId}" placeholder="ç”Ÿåœ°ç•ªå·ãƒ»åç§°">
            </div>
            <div class="form-group">
                <label for="color_${itemId}">è‰²</label>
                <input type="text" id="color_${itemId}" name="color_${itemId}">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="jacketStyle_${itemId}">ã‚¸ãƒ£ã‚±ãƒƒãƒˆã‚¹ã‚¿ã‚¤ãƒ«</label>
                <select id="jacketStyle_${itemId}" name="jacketStyle_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <optgroup label="ã‚·ãƒ³ã‚°ãƒ«">
                        <option value="single_2x1">ã‚·ãƒ³ã‚°ãƒ«ï¼’Ã—ï¼‘</option>
                        <option value="single_1x1">ã‚·ãƒ³ã‚°ãƒ«ï¼‘Ã—ï¼‘</option>
                        <option value="single_3x1">ã‚·ãƒ³ã‚°ãƒ«ï¼“Ã—ï¼‘</option>
                    </optgroup>
                    <optgroup label="ãƒ€ãƒ–ãƒ«">
                        <option value="double_6x2">ãƒ€ãƒ–ãƒ«ï¼–Ã—ï¼’</option>
                        <option value="double_4x2">ãƒ€ãƒ–ãƒ«ï¼”Ã—ï¼’</option>
                        <option value="double_2x1">ãƒ€ãƒ–ãƒ«ï¼’Ã—ï¼‘</option>
                    </optgroup>
                </select>
            </div>
            <div class="form-group">
                <label for="liningType_${itemId}">è£åœ°ä»•æ§˜</label>
                <select id="liningType_${itemId}" name="liningType_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="senuki">èƒŒæŠœã</option>
                    <option value="soura">ç·è£</option>
                </select>
            </div>
            <div class="form-group">
                <label for="lining_${itemId}">è£åœ°</label>
                <input type="text" id="lining_${itemId}" name="lining_${itemId}" placeholder="è£åœ°ã®ç¨®é¡ãƒ»è‰²">
            </div>
            <div class="form-group">
                <label for="buttons_${itemId}">ãƒœã‚¿ãƒ³</label>
                <input type="text" id="buttons_${itemId}" name="buttons_${itemId}" placeholder="ãƒœã‚¿ãƒ³ã®ç¨®é¡ãƒ»æè³ª">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="jacketFit_${itemId}">ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ•ã‚£ãƒƒãƒˆ</label>
                <select id="jacketFit_${itemId}" name="jacketFit_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="tight">ã‚¿ã‚¤ãƒˆãƒ•ã‚£ãƒƒãƒˆ</option>
                    <option value="basic">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ãƒ•ã‚£ãƒƒãƒˆ</option>
                    <option value="loose">ãƒ«ãƒ¼ã‚ºãƒ•ã‚£ãƒƒãƒˆ</option>
                </select>
            </div>
            <div class="form-group">
                <label for="pantsFit_${itemId}">ãƒ‘ãƒ³ãƒ„ãƒ•ã‚£ãƒƒãƒˆ</label>
                <select id="pantsFit_${itemId}" name="pantsFit_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="tight">ã‚¿ã‚¤ãƒˆãƒ•ã‚£ãƒƒãƒˆ</option>
                    <option value="basic">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ãƒ•ã‚£ãƒƒãƒˆ</option>
                    <option value="loose">ãƒ«ãƒ¼ã‚ºãƒ•ã‚£ãƒƒãƒˆ</option>
                </select>
            </div>
            <div class="form-group">
                <label for="pantsShape_${itemId}">ãƒ‘ãƒ³ãƒ„å½¢çŠ¶</label>
                <select id="pantsShape_${itemId}" name="pantsShape_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="tapered">ãƒ†ãƒ¼ãƒ‘ãƒ¼ãƒ‰</option>
                    <option value="straight">ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ</option>
                    <option value="wide">ãƒ¯ã‚¤ãƒ‰</option>
                    <option value="slight_flare">å°‘ã—ãƒ•ãƒ¬ã‚¢</option>
                    <option value="flare">ãƒ•ãƒ¬ã‚¢</option>
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="chestPocket_${itemId}">èƒ¸ãƒã‚±ãƒƒãƒˆ</label>
                <select id="chestPocket_${itemId}" name="chestPocket_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="barca">ãƒãƒ«ã‚«ãƒã‚±ãƒƒãƒˆ</option>
                    <option value="box">ç®±ãƒã‚±ãƒƒãƒˆ</option>
                    <option value="out">ã‚¢ã‚¦ãƒˆãƒã‚±ãƒƒãƒˆ</option>
                </select>
            </div>
            <div class="form-group">
                <label for="waistPocket_${itemId}">è…°ãƒã‚±ãƒƒãƒˆ</label>
                <select id="waistPocket_${itemId}" name="waistPocket_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="flap">ãƒ•ãƒ©ãƒƒãƒ—ãƒã‚±ãƒƒãƒˆ</option>
                    <option value="out">ã‚¢ã‚¦ãƒˆãƒã‚±ãƒƒãƒˆ</option>
                    <option value="double_piping">ä¸¡ç‰ç¸ãƒã‚±ãƒƒãƒˆï¼ˆãƒ•ãƒ©ãƒƒãƒ—ãªã—ï¼‰</option>
                    <option value="change">ãƒã‚§ãƒ³ã‚¸ãƒã‚±ãƒƒãƒˆ</option>
                    <option value="hacking">ãƒãƒƒã‚­ãƒ³ã‚°ãƒã‚±ãƒƒãƒˆ</option>
                    <option value="hacking_change">ãƒãƒƒã‚­ãƒ³ã‚°ãƒã‚§ãƒ³ã‚¸P</option>
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="lapelStyle_${itemId}">è¡¿å‹ï¼ˆãƒ©ãƒšãƒ«ãƒ»ã‚«ãƒ©ãƒ¼ï¼‰</label>
                <select id="lapelStyle_${itemId}" name="lapelStyle_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <optgroup label="ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ãƒ¼ãƒ„">
                        <option value="notched">ãƒãƒƒãƒãƒ‰ãƒ©ãƒšãƒ«ï¼ˆä¸€èˆ¬çš„ï¼‰</option>
                        <option value="peaked">ãƒ”ãƒ¼ã‚¯ãƒ‰ãƒ©ãƒšãƒ«ï¼ˆå‰£å…ˆï¼‰</option>
                        <option value="shawl">ã‚·ãƒ§ãƒ¼ãƒ«ã‚«ãƒ©ãƒ¼</option>
                        <option value="narrow">ãƒŠãƒ­ãƒ¼ãƒ©ãƒšãƒ«</option>
                        <option value="wide">ãƒ¯ã‚¤ãƒ‰ãƒ©ãƒšãƒ«</option>
                    </optgroup>
                    <optgroup label="ã‚·ãƒ£ãƒ„ã‚«ãƒ©ãƒ¼">
                        <option value="regular_collar">ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ã‚«ãƒ©ãƒ¼</option>
                        <option value="semi_wide_collar">ã‚»ãƒŸãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                        <option value="wide_collar">ãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                        <option value="horizontal_wide_collar">ãƒ›ãƒªã‚¾ãƒ³ã‚¿ãƒ«ãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                        <option value="round_collar">ãƒ©ã‚¦ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                        <option value="open_collar">ã‚ªãƒ¼ãƒ—ãƒ³ã‚«ãƒ©ãƒ¼</option>
                        <option value="stand_collar">ã‚¹ã‚¿ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                        <option value="wing_collar">ã‚¦ã‚£ãƒ³ã‚°ã‚«ãƒ©ãƒ¼</option>
                        <option value="short_regular_collar">ã‚·ãƒ§ãƒ¼ãƒˆãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ã‚«ãƒ©ãƒ¼</option>
                        <option value="short_semi_wide_collar">ã‚·ãƒ§ãƒ¼ãƒˆã‚»ãƒŸãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                        <option value="short_wide_collar">ã‚·ãƒ§ãƒ¼ãƒˆãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                        <option value="short_horizontal_wide_collar">ã‚·ãƒ§ãƒ¼ãƒˆãƒ›ãƒªã‚¾ãƒ³ã‚¿ãƒ«ãƒ¯ã‚¤ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                        <option value="short_round_collar">ã‚·ãƒ§ãƒ¼ãƒˆãƒ©ã‚¦ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼</option>
                    </optgroup>
                </select>
            </div>
            <div class="form-group">
                <label for="lapelWidth_${itemId}">è¡¿å¹…</label>
                <select id="lapelWidth_${itemId}" name="lapelWidth_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="5">5cm</option>
                    <option value="5.5">5.5cm</option>
                    <option value="6">6cm</option>
                    <option value="6.5">6.5cm</option>
                    <option value="7">7cm</option>
                    <option value="7.5">7.5cm</option>
                    <option value="8">8cm</option>
                    <option value="8.5">8.5cm</option>
                    <option value="9">9cm</option>
                    <option value="9.5">9.5cm</option>
                    <option value="10">10cm</option>
                    <option value="10.5">10.5cm</option>
                    <option value="11">11cm</option>
                    <option value="11.5">11.5cm</option>
                    <option value="12">12cm</option>
                </select>
            </div>
            <div class="form-group">
                <label for="cuffStyle_${itemId}">ã‚«ãƒ•ã‚¹ï¼ˆè¢–å£ï¼‰</label>
                <select id="cuffStyle_${itemId}" name="cuffStyle_${itemId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <optgroup label="ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ãƒ¼ãƒ„">
                        <option value="4button">4ã¤ãƒœã‚¿ãƒ³æœ¬åˆ‡ç¾½</option>
                        <option value="3button">3ã¤ãƒœã‚¿ãƒ³æœ¬åˆ‡ç¾½</option>
                        <option value="4button_fake">4ã¤ãƒœã‚¿ãƒ³ï¼ˆé£¾ã‚Šï¼‰</option>
                        <option value="3button_fake">3ã¤ãƒœã‚¿ãƒ³ï¼ˆé£¾ã‚Šï¼‰</option>
                        <option value="surgeons">ã‚µãƒ¼ã‚¸ãƒ£ãƒ³ã‚«ãƒ•ã‚¹</option>
                        <option value="kissing">ã‚­ãƒƒã‚·ãƒ³ã‚°ãƒœã‚¿ãƒ³</option>
                    </optgroup>
                    <optgroup label="ã‚·ãƒ£ãƒ„ã‚«ãƒ•ã‚¹">
                        <option value="regular_no_opening">ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ï¼ˆé–‹ããªã—ï¼‰</option>
                        <option value="small_round">å°ä¸¸</option>
                        <option value="round_b">ãƒ©ã‚¦ãƒ³ãƒ‰B</option>
                        <option value="round_c">ãƒ©ã‚¦ãƒ³ãƒ‰C</option>
                        <option value="cut_corner">è§’è½ã¡</option>
                        <option value="corn">ã‚³ãƒ¼ãƒ³</option>
                        <option value="turn_up">ã‚¿ãƒ¼ãƒ³ãƒŠãƒƒãƒ—</option>
                        <option value="double_cuff">ãƒ€ãƒ–ãƒ«</option>
                        <option value="arrow">ã‚¢ãƒ­ãƒ¼</option>
                    </optgroup>
                </select>
            </div>
        </div>
        
        <div class="form-group">
            <label>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</label>
            <div class="checkbox-group">
                <div style="width: 100%; margin-bottom: 10px;">
                    <strong style="color: #2c3e50;">ã‚¸ãƒ£ã‚±ãƒƒãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="full_stitch_${itemId}" name="options_${itemId}" data-price="1500" onchange="updateTotalPrice()">
                    <label for="full_stitch_${itemId}">ãƒ•ãƒ«ã‚¹ãƒ†ãƒƒãƒ (Â¥1,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="functional_sleeves_${itemId}" name="options_${itemId}" data-price="1500" onchange="updateTotalPrice()">
                    <label for="functional_sleeves_${itemId}">æœ¬åˆ‡ç¾½ (Â¥1,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="buttonhole_color_${itemId}" name="options_${itemId}" data-price="1500" onchange="updateTotalPrice()">
                    <label for="buttonhole_color_${itemId}">ãƒœã‚¿ãƒ³ãƒ›ãƒ¼ãƒ«è‰²å¤‰ãˆ (Â¥1,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="kurumi_button_${itemId}" name="options_${itemId}" data-price="1500" onchange="updateTotalPrice()">
                    <label for="kurumi_button_${itemId}">ã‚¯ãƒ«ãƒŸé‡¦ (Â¥1,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="special_design_${itemId}" name="options_${itemId}" data-price="13000" onchange="updateTotalPrice()">
                    <label for="special_design_${itemId}">ç‰¹æ®Šãƒ‡ã‚¶ã‚¤ãƒ³ (Â¥13,000)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="lapel_silk_${itemId}" name="options_${itemId}" data-price="8000" onchange="updateTotalPrice()">
                    <label for="lapel_silk_${itemId}">ãƒ©ãƒšãƒ«ã‚·ãƒ«ã‚¯åˆ‡ã‚Šæ›¿ãˆ (Â¥8,000)</label>
                </div>
                
                <div style="width: 100%; margin: 10px 0;">
                    <strong style="color: #2c3e50;">è£åœ°ã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="lining_a_${itemId}" name="options_${itemId}" data-price="2500" onchange="updateTotalPrice()">
                    <label for="lining_a_${itemId}">æœ‰æ–™è£åœ°A (Â¥2,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="lining_b_${itemId}" name="options_${itemId}" data-price="5000" onchange="updateTotalPrice()">
                    <label for="lining_b_${itemId}">æœ‰æ–™è£åœ°B (Â¥5,000)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="lining_c_${itemId}" name="options_${itemId}" data-price="17000" onchange="updateTotalPrice()">
                    <label for="lining_c_${itemId}">æœ‰æ–™è£åœ°C (Â¥17,000)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="hiromikaeshi_${itemId}" name="options_${itemId}" data-price="3500" onchange="updateTotalPrice()">
                    <label for="hiromikaeshi_${itemId}">åºƒè¦‹è¿”ã— (Â¥3,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="odaiba_${itemId}" name="options_${itemId}" data-price="2500" onchange="updateTotalPrice()">
                    <label for="odaiba_${itemId}">ãŠå°å ´ (Â¥2,500)</label>
                </div>
                
                <div style="width: 100%; margin: 10px 0;">
                    <strong style="color: #2c3e50;">ãƒœã‚¿ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="button_a_${itemId}" name="options_${itemId}" data-price="1000" onchange="updateTotalPrice()">
                    <label for="button_a_${itemId}">æœ‰æ–™ãƒœã‚¿ãƒ³A (Â¥1,000)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="button_b_${itemId}" name="options_${itemId}" data-price="2500" onchange="updateTotalPrice()">
                    <label for="button_b_${itemId}">æœ‰æ–™ãƒœã‚¿ãƒ³B (Â¥2,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="button_c_${itemId}" name="options_${itemId}" data-price="3900" onchange="updateTotalPrice()">
                    <label for="button_c_${itemId}">æœ‰æ–™ãƒœã‚¿ãƒ³C (Â¥3,900)</label>
                </div>
                
                <div style="width: 100%; margin: 10px 0;">
                    <strong style="color: #2c3e50;">ãƒ‘ãƒ³ãƒ„ã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="watch_pocket_${itemId}" name="options_${itemId}" data-price="1500" onchange="updateTotalPrice()">
                    <label for="watch_pocket_${itemId}">ã‚¦ã‚©ãƒƒãƒãƒã‚±ãƒƒãƒˆ (Â¥1,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="full_lining_${itemId}" name="options_${itemId}" data-price="2500" onchange="updateTotalPrice()">
                    <label for="full_lining_${itemId}">ç·è£ä»•æ§˜ (Â¥2,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="side_adjuster_${itemId}" name="options_${itemId}" data-price="2500" onchange="updateTotalPrice()">
                    <label for="side_adjuster_${itemId}">ã‚µã‚¤ãƒ‰å°¾éŒ  (Â¥2,500)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="button_fly_${itemId}" name="options_${itemId}" data-price="1000" onchange="updateTotalPrice()">
                    <label for="button_fly_${itemId}">ãƒœã‚¿ãƒ³ä»•æ§˜ (Â¥1,000)</label>
                </div>
                
                <div style="width: 100%; margin: 10px 0;">
                    <strong style="color: #2c3e50;">ãƒ™ã‚¹ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³</strong>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="vest_collar_${itemId}" name="options_${itemId}" data-price="3000" onchange="updateTotalPrice()">
                    <label for="vest_collar_${itemId}">è¡¿ä»˜ã (Â¥3,000)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="vest_back_${itemId}" name="options_${itemId}" data-price="2000" onchange="updateTotalPrice()">
                    <label for="vest_back_${itemId}">èƒŒå…±ç”Ÿåœ° (Â¥2,000)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="vest_double_${itemId}" name="options_${itemId}" data-price="3000" onchange="updateTotalPrice()">
                    <label for="vest_double_${itemId}">ãƒ€ãƒ–ãƒ« (Â¥3,000)</label>
                </div>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="price_${itemId}">ä¾¡æ ¼ï¼ˆå††ï¼‰</label>
                <input type="number" id="price_${itemId}" name="price_${itemId}" step="1000" onchange="updateTotalPrice()">
            </div>
            <div class="form-group">
                <label for="deliveryDate_${itemId}">ç´æœŸ</label>
                <input type="date" id="deliveryDate_${itemId}" name="deliveryDate_${itemId}">
            </div>
        </div>
        
        <div class="form-group">
            <label for="notes_${itemId}">å‚™è€ƒ</label>
            <textarea id="notes_${itemId}" name="notes_${itemId}" rows="2" placeholder="ç‰¹åˆ¥ãªè¦æœ›ã‚„æ³¨æ„äº‹é …"></textarea>
        </div>
    `;
}
    </script>
</body>
</html>
 
